{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ahmad12\\\\Documents\\\\Vividly\\\\Frontend\\\\src\\\\Components\\\\Home.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useRef, useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport vividlyContext from \"../Context/vividlyContext\";\n// import { io } from \"socket.io-client\";\n\nimport { faThumbsUp } from \"@fortawesome/free-solid-svg-icons\";\nimport { faComment } from \"@fortawesome/free-regular-svg-icons\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  // useEffect(() => {\n  //   const socket = io(\"http://localhost:5000\");\n\n  //   socket.emit(\"message\", \"Bilal\");\n  //   socket.on(\"response\", (data) => {\n  //     console.log(\"Server Response:\", data);\n  //   });\n  //   return () => {\n  //     socket.disconnect();\n  //   };\n  // }, []);\n\n  const context = useContext(vividlyContext);\n  const {\n    handleCreateStoryWithMediaOnly,\n    handleCreateStoryTextAndMedia\n  } = context;\n  const [showPrevIcon, setShowPrevIcon] = useState(false);\n  const [showNextIcon, setShowNextIcon] = useState(true);\n  const storiesContainerRef = useRef(null);\n  const [userProfile, setUserProfile] = useState(\"\");\n  const [groupedStories, setGroupedStories] = useState([]);\n  const processStories = stories => {\n    const newGroupedStories = {};\n\n    // Process incoming stories\n    stories.forEach(story => {\n      if (!newGroupedStories[story.user._id]) {\n        newGroupedStories[story.user._id] = {\n          user: story.user,\n          stories: []\n        };\n      }\n      newGroupedStories[story.user._id].stories.push(story);\n    });\n\n    // Merge existing and new stories without overwriting\n    setGroupedStories(prevStories => {\n      const updatedStories = {\n        ...prevStories\n      };\n      Object.values(newGroupedStories).forEach(group => {\n        if (!updatedStories[group.user._id]) {\n          updatedStories[group.user._id] = group;\n        } else {\n          updatedStories[group.user._id].stories.push(...group.stories);\n        }\n      });\n      return Object.values(updatedStories);\n    });\n  };\n  const handleFetchFollowedUserStories = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const parsedToken = JSON.parse(token);\n      const response = await fetch(`${ENDPOINT}/api/story/getFollowUserStories`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": parsedToken\n        }\n      });\n      const data = await response.json();\n      if (data.success) {\n        processStories(data.stories);\n      }\n    } catch (error) {\n      console.log(\"Error:\", error.message);\n    }\n  };\n  const handleFetchUserStories = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const parsedToken = JSON.parse(token);\n      const response = await fetch(`${ENDPOINT}/api/story/getUStories`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": parsedToken\n        }\n      });\n      const data = await response.json();\n      if (data.success) {\n        processStories(data.stories);\n      }\n    } catch (error) {\n      console.log(\"Error:\", error.message);\n    }\n  };\n  const handlefetchUserProfile = async () => {\n    const id = localStorage.getItem(\"id\");\n    const parsedId = JSON.parse(id);\n    const token = localStorage.getItem(\"token\");\n    const parsedToken = JSON.parse(token);\n    try {\n      const response = await fetch(`${ENDPOINT}/api/user/getUserProfile/${parsedId}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": parsedToken\n        }\n      });\n      const data = await response.json();\n      if (data.success) {\n        setUserProfile(data);\n      } else {\n        console.log(\"Error\");\n      }\n    } catch (error) {\n      console.log(\"Error:\", error.message);\n    }\n  };\n  useEffect(() => {\n    handlefetchUserProfile();\n    handleFetchFollowedUserStories();\n    handleFetchUserStories();\n  }, []);\n  const ENDPOINT = process.env.REACT_APP_ENDPOINT;\n  useEffect(() => {\n    const handleScroll = () => {\n      if (storiesContainerRef.current) {\n        const {\n          scrollLeft,\n          scrollWidth,\n          clientWidth\n        } = storiesContainerRef.current;\n\n        // Show \"prev\" icon if scrollLeft > 0\n        setShowPrevIcon(scrollLeft > 0);\n\n        // Show \"next\" icon if there's more content to scroll\n        setShowNextIcon(scrollLeft + clientWidth < scrollWidth - 1);\n      }\n    };\n\n    // Attach scroll event listener\n    const container = storiesContainerRef.current;\n    container.addEventListener(\"scroll\", handleScroll);\n\n    // Initial state update\n    handleScroll();\n    return () => {\n      // Cleanup event listener\n      container.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, []);\n  const [mediaPreview, setMediaPreview] = useState(null);\n  const [storyMediaPreview, setStoryMediaPreview] = useState(null);\n\n  // const handlePost = () => {};\n\n  const [mediaFile, setMediaFile] = useState(null);\n  const [storyMediaFile, setStoryMediaFile] = useState(null);\n  const [media, setMedia] = useState(\"\");\n  const [caption, setCaption] = useState(\"\");\n  const [storyCaption, setStoryCaption] = useState(\"\");\n  const [selectedStory, setSelectedStory] = useState(null);\n  const [currentStoryIndex, setCurrentStoryIndex] = useState(0);\n  const handleMediaChange = async e => {\n    const file = e.target.files[0];\n    if (!file) {\n      return console.log(\"Please upload a file!\");\n    }\n    const formdata = new FormData();\n    formdata.append(\"media\", file);\n    try {\n      const data = await fetch(`${ENDPOINT}/api/post/media`, {\n        method: \"POST\",\n        body: formdata\n      });\n      const response = await data.json();\n      if (response.success) {\n        setMedia(response.url);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n    setMediaPreview(URL.createObjectURL(file));\n    setMediaFile(file);\n  };\n  const handleStoryChange = async e => {\n    const file = e.target.files[0];\n    if (!file) {\n      return console.log(\"Please upload a file!\");\n    }\n    const formdata = new FormData();\n    formdata.append(\"media\", file);\n    try {\n      const data = await fetch(`${ENDPOINT}/api/post/media`, {\n        method: \"POST\",\n        body: formdata\n      });\n      const response = await data.json();\n      if (response.success) {\n        setMedia(response.url);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n    setStoryMediaPreview(URL.createObjectURL(file));\n    setStoryMediaFile(file);\n  };\n  const handleCaptionChange = e => {\n    setCaption(e.target.value);\n  };\n  const handleStoryCaptionChange = e => {\n    setStoryCaption(e.target.value);\n  };\n  const handleCreatePost = async () => {\n    try {\n      const mediaType = mediaFile.type.startsWith(\"video/\") ? \"video\" : \"image\";\n      const token = localStorage.getItem(\"token\");\n      const parsedToken = JSON.parse(token);\n      const response = await fetch(`${ENDPOINT}/api/post/createPost`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": parsedToken\n        },\n        body: JSON.stringify({\n          description: caption,\n          media: media,\n          mediaType: mediaType\n        })\n      });\n      const data = await response.json();\n      setMediaFile(null);\n      setMediaPreview(\"\");\n      setCaption(\"\");\n      // setUserPost([...userPost, data]);\n      // await handleFetchUserPosts();\n    } catch (error) {\n      console.log(\"Error:\", error.message);\n    }\n  };\n  const handleCreateStory = async () => {\n    try {\n      if (storyMediaFile && storyCaption) {\n        const response = await handleCreateStoryTextAndMedia(media, storyCaption);\n        if (response.success) {\n          setStoryMediaFile(null);\n          setStoryMediaPreview(\"\");\n          setStoryCaption(\"\");\n        }\n      } else if (storyMediaFile) {\n        const response = await handleCreateStoryWithMediaOnly(media);\n        if (response.success) {\n          setStoryMediaFile(null);\n          setStoryMediaPreview(\"\");\n          setStoryCaption(\"\");\n        }\n      }\n\n      // setUserPost([...userPost, data]);\n      // await handleFetchUserPosts();\n    } catch (error) {\n      console.log(\"Error:\", error);\n    }\n  };\n  const handleStoryClick = stories => {\n    setSelectedStory(stories);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex min-h-screen sm:pl-72 sm:pt-24 max-w-7xl mx-auto sm:p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full bg-white p-4 rounded-lg shadow-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative mb-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: storiesContainerRef,\n            className: \"flex space-x-4 overflow-x-auto scrollbar-hide whitespace-nowrap mb-4 py-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-shrink-0 w-24 h-24 bg-gray-300 rounded-full cursor-pointer relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/*,video/*\",\n                onChange: handleStoryChange,\n                className: \"absolute inset-0 opacity-0 cursor-pointer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center h-full text-gray-700\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xl font-bold\",\n                  children: \"+\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this), groupedStories && groupedStories.map(story => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-shrink-0 w-24 h-24 bg-gray-300 rounded-full cursor-pointer\",\n                onClick: () => handleStoryClick(story) // On click, display the stories\n                ,\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: story.user.picture,\n                  alt: \"Failed to load profile img\",\n                  className: \"w-full h-full rounded-full object-cover border-2 border-transparent \\r bg-gradient-to-r from-pink-600 via-yellow-500 to-pink-600 p-[2px] shadow-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 23\n                }, this)\n              }, story.user._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 21\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this), selectedStory && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative max-w-3xl w-[90%] md:w-full bg-white p-4 rounded-lg shadow-2xl overflow-hidden\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setSelectedStory(null),\n              className: \"absolute top-4 right-4 text-white text-2xl bg-black bg-opacity-50 px-5 py-1 rounded-lg hover:bg-opacity-75 transition\",\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center mb-4 hover:cursor-pointer\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: selectedStory.user.picture,\n                alt: \"Failed to load img\",\n                className: \"rounded-full h-14 w-14 mr-3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-lg font-semibold text-black\",\n                  children: selectedStory.user.fullName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-base text-gray-600\",\n                  children: [\"@\", selectedStory.user.userName]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col items-center justify-center relative\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative w-full max-w-3xl h-[75vh] bg-black rounded-lg overflow-hidden shadow-lg\",\n                children: [selectedStory.stories[currentStoryIndex].imageUrl.endsWith(\".mp4\") ? /*#__PURE__*/_jsxDEV(\"video\", {\n                  src: selectedStory.stories[currentStoryIndex].imageUrl,\n                  controls: true,\n                  autoPlay: true,\n                  className: \"w-full h-full object-contain rounded-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: selectedStory.stories[currentStoryIndex].imageUrl,\n                  alt: \"Failed to load story\",\n                  className: \"w-full h-full object-contain rounded-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 393,\n                  columnNumber: 23\n                }, this), selectedStory.stories[currentStoryIndex].text && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"absolute bottom-14 left-4 text-white text-base font-semibold shadow-md max-w-[90%] bg-black bg-opacity-50 p-2 rounded-lg\",\n                  children: [\"Caption: \", selectedStory.stories[currentStoryIndex].text]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 402,\n                  columnNumber: 23\n                }, this), currentStoryIndex > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setCurrentStoryIndex(currentStoryIndex - 1),\n                  className: \"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white text-3xl p-2 rounded-full hover:bg-opacity-75\",\n                  children: \"\\u25C0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 409,\n                  columnNumber: 23\n                }, this), currentStoryIndex < selectedStory.stories.length - 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setCurrentStoryIndex(currentStoryIndex + 1),\n                  className: \"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white text-3xl p-2 rounded-full hover:bg-opacity-75\",\n                  children: \"\\u25B6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 421,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 bg-white rounded-lg shadow-lg mt-2 mb-5\",\n          children: [storyMediaPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4\",\n            children: storyMediaFile.type.startsWith(\"video/\") ? /*#__PURE__*/_jsxDEV(\"video\", {\n              src: storyMediaPreview,\n              controls: true,\n              className: \"w-full h-auto rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              src: storyMediaPreview,\n              alt: \"Media Preview\",\n              className: \"w-full h-auto rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 15\n          }, this), storyMediaPreview && /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"mt-4 w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none text-black\",\n            placeholder: \"Write a caption...\",\n            value: storyCaption,\n            onChange: handleStoryCaptionChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end mt-4 space-x-3\",\n            children: storyMediaFile && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"py-2 px-6 bg-gray-200 text-black rounded-lg hover:bg-gray-300\",\n                onClick: () => {\n                  setStoryMediaFile(null);\n                  setStoryMediaPreview(\"\");\n                  setStoryCaption(\"\");\n                },\n                disabled: !storyMediaFile,\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 470,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `py-2 px-6 rounded-lg text-white ${storyMediaFile ? \"bg-blue-600 hover:bg-blue-700\" : \"bg-gray-400 cursor-not-allowed\"}`,\n                onClick: handleCreateStory,\n                disabled: !storyMediaFile,\n                children: \"Upload Story\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 467,\n            columnNumber: 13\n          }, this), !storyMediaFile && /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"mediaUpload\",\n            className: \"cursor-pointer flex flex-col items-center justify-center border-2 border-dashed border-gray-300 p-6 rounded-lg hover:border-blue-500 transition\",\n            children: [mediaPreview ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-blue-500 font-semibold\",\n              children: \"Change Media\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-12 h-12 text-gray-500\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                viewBox: \"0 0 24 24\",\n                xmlns: \"http://www.w3.org/2000/svg\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M12 4v16m8-8H4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 514,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600 mt-2 text-center\",\n                children: \"Click to upload an image or video\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              id: \"mediaUpload\",\n              className: \"hidden\",\n              accept: \"image/*, video/*\",\n              onChange: handleMediaChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 521,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 15\n          }, this), mediaPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4\",\n            children: mediaFile.type.startsWith(\"video/\") ? /*#__PURE__*/_jsxDEV(\"video\", {\n              src: mediaPreview,\n              controls: true,\n              className: \"w-full h-auto rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              src: mediaPreview,\n              alt: \"Media Preview\",\n              className: \"w-full h-auto rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 541,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 15\n          }, this), mediaPreview && /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"mt-4 w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none text-black\",\n            placeholder: \"Write a caption...\",\n            value: caption,\n            onChange: handleCaptionChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end mt-4 space-x-3\",\n            children: mediaFile && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"py-2 px-6 bg-gray-200 text-black rounded-lg hover:bg-gray-300\",\n                onClick: () => {\n                  setMediaFile(null);\n                  setMediaPreview(\"\");\n                  setCaption(\"\");\n                },\n                disabled: !mediaFile,\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 564,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `py-2 px-6 rounded-lg text-white ${mediaFile && caption ? \"bg-blue-600 hover:bg-blue-700\" : \"bg-gray-400 cursor-not-allowed\"}`,\n                onClick: handleCreatePost,\n                disabled: !mediaFile || !caption,\n                children: \"Create Post\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-b pb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-12 h-12 rounded-full bg-gray-300\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 596,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold text-black\",\n                  children: \"User Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 598,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"2 hours ago\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 599,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 597,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 595,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-2 text-gray-700\",\n              children: \"This is a sample post content...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 602,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 flex space-x-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-1 text-gray-700\",\n                children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faThumbsUp,\n                  className: \"text-xl\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 607,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"12\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 608,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-1 text-gray-700\",\n                children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faComment,\n                  className: \"text-xl\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 611,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 612,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 610,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-b pb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-12 h-12 rounded-full bg-gray-300\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 619,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold text-black\",\n                  children: \"User Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 621,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"2 hours ago\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 622,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 620,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 618,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-2 text-gray-700\",\n              children: \"This is a sample post content...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 625,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 flex space-x-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-1 text-gray-700\",\n                children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faThumbsUp,\n                  className: \"text-xl\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 630,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"12\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 631,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 629,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-1 text-gray-700\",\n                children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faComment,\n                  className: \"text-xl\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 634,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 635,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 628,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 617,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-b pb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-12 h-12 rounded-full bg-gray-300\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 641,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold text-black\",\n                  children: \"User Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 643,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"2 hours ago\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 644,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 642,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-2 text-gray-700\",\n              children: \"This is a sample post content...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 647,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 flex space-x-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-1 text-gray-700\",\n                children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faThumbsUp,\n                  className: \"text-xl\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 652,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"12\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 653,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 651,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-1 text-gray-700\",\n                children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faComment,\n                  className: \"text-xl\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 656,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 657,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 655,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 650,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 639,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-b pb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-12 h-12 rounded-full bg-gray-300\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 663,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold text-black\",\n                  children: \"User Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 665,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"2 hours ago\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 666,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 664,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-2 text-gray-700\",\n              children: \"This is a sample post content...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 669,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 flex space-x-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-1 text-gray-700\",\n                children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faThumbsUp,\n                  className: \"text-xl\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 674,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"12\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 675,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 673,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-1 text-gray-700\",\n                children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faComment,\n                  className: \"text-xl\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 678,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 679,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 677,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 672,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 661,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(Home, \"vPwQJ0BYDSpra6hIvay2zrAwUo0=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useContext","useEffect","useRef","useState","FontAwesomeIcon","vividlyContext","faThumbsUp","faComment","jsxDEV","_jsxDEV","Fragment","_Fragment","Home","_s","context","handleCreateStoryWithMediaOnly","handleCreateStoryTextAndMedia","showPrevIcon","setShowPrevIcon","showNextIcon","setShowNextIcon","storiesContainerRef","userProfile","setUserProfile","groupedStories","setGroupedStories","processStories","stories","newGroupedStories","forEach","story","user","_id","push","prevStories","updatedStories","Object","values","group","handleFetchFollowedUserStories","token","localStorage","getItem","parsedToken","JSON","parse","response","fetch","ENDPOINT","method","headers","data","json","success","error","console","log","message","handleFetchUserStories","handlefetchUserProfile","id","parsedId","process","env","REACT_APP_ENDPOINT","handleScroll","current","scrollLeft","scrollWidth","clientWidth","container","addEventListener","removeEventListener","mediaPreview","setMediaPreview","storyMediaPreview","setStoryMediaPreview","mediaFile","setMediaFile","storyMediaFile","setStoryMediaFile","media","setMedia","caption","setCaption","storyCaption","setStoryCaption","selectedStory","setSelectedStory","currentStoryIndex","setCurrentStoryIndex","handleMediaChange","e","file","target","files","formdata","FormData","append","body","url","URL","createObjectURL","handleStoryChange","handleCaptionChange","value","handleStoryCaptionChange","handleCreatePost","mediaType","type","startsWith","stringify","description","handleCreateStory","handleStoryClick","children","className","ref","accept","onChange","fileName","_jsxFileName","lineNumber","columnNumber","map","onClick","src","picture","alt","fullName","userName","imageUrl","endsWith","controls","autoPlay","text","length","placeholder","disabled","htmlFor","fill","stroke","strokeWidth","viewBox","xmlns","d","icon","_c","$RefreshReg$"],"sources":["C:/Users/Ahmad12/Documents/Vividly/Frontend/src/Components/Home.js"],"sourcesContent":["import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport vividlyContext from \"../Context/vividlyContext\";\r\n// import { io } from \"socket.io-client\";\r\n\r\nimport { faThumbsUp } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { faComment } from \"@fortawesome/free-regular-svg-icons\";\r\n\r\nconst Home = () => {\r\n  // useEffect(() => {\r\n  //   const socket = io(\"http://localhost:5000\");\r\n\r\n  //   socket.emit(\"message\", \"Bilal\");\r\n  //   socket.on(\"response\", (data) => {\r\n  //     console.log(\"Server Response:\", data);\r\n  //   });\r\n  //   return () => {\r\n  //     socket.disconnect();\r\n  //   };\r\n  // }, []);\r\n\r\n  const context = useContext(vividlyContext);\r\n  const { handleCreateStoryWithMediaOnly, handleCreateStoryTextAndMedia } =\r\n    context;\r\n\r\n  const [showPrevIcon, setShowPrevIcon] = useState(false);\r\n  const [showNextIcon, setShowNextIcon] = useState(true);\r\n  const storiesContainerRef = useRef(null);\r\n  const [userProfile, setUserProfile] = useState(\"\");\r\n\r\n  const [groupedStories, setGroupedStories] = useState([]);\r\n\r\n  const processStories = (stories) => {\r\n    const newGroupedStories = {};\r\n\r\n    // Process incoming stories\r\n    stories.forEach((story) => {\r\n      if (!newGroupedStories[story.user._id]) {\r\n        newGroupedStories[story.user._id] = {\r\n          user: story.user,\r\n          stories: [],\r\n        };\r\n      }\r\n      newGroupedStories[story.user._id].stories.push(story);\r\n    });\r\n\r\n    // Merge existing and new stories without overwriting\r\n    setGroupedStories((prevStories) => {\r\n      const updatedStories = { ...prevStories };\r\n\r\n      Object.values(newGroupedStories).forEach((group) => {\r\n        if (!updatedStories[group.user._id]) {\r\n          updatedStories[group.user._id] = group;\r\n        } else {\r\n          updatedStories[group.user._id].stories.push(...group.stories);\r\n        }\r\n      });\r\n\r\n      return Object.values(updatedStories);\r\n    });\r\n  };\r\n\r\n  const handleFetchFollowedUserStories = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const parsedToken = JSON.parse(token);\r\n      const response = await fetch(\r\n        `${ENDPOINT}/api/story/getFollowUserStories`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"auth-token\": parsedToken,\r\n          },\r\n        }\r\n      );\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        processStories(data.stories);\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Error:\", error.message);\r\n    }\r\n  };\r\n\r\n  const handleFetchUserStories = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const parsedToken = JSON.parse(token);\r\n      const response = await fetch(`${ENDPOINT}/api/story/getUStories`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"auth-token\": parsedToken,\r\n        },\r\n      });\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        processStories(data.stories);\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Error:\", error.message);\r\n    }\r\n  };\r\n\r\n  const handlefetchUserProfile = async () => {\r\n    const id = localStorage.getItem(\"id\");\r\n    const parsedId = JSON.parse(id);\r\n    const token = localStorage.getItem(\"token\");\r\n    const parsedToken = JSON.parse(token);\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `${ENDPOINT}/api/user/getUserProfile/${parsedId}`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"auth-token\": parsedToken,\r\n          },\r\n        }\r\n      );\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setUserProfile(data);\r\n      } else {\r\n        console.log(\"Error\");\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Error:\", error.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    handlefetchUserProfile();\r\n    handleFetchFollowedUserStories();\r\n    handleFetchUserStories();\r\n  }, []);\r\n\r\n  const ENDPOINT = process.env.REACT_APP_ENDPOINT;\r\n\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      if (storiesContainerRef.current) {\r\n        const { scrollLeft, scrollWidth, clientWidth } =\r\n          storiesContainerRef.current;\r\n\r\n        // Show \"prev\" icon if scrollLeft > 0\r\n        setShowPrevIcon(scrollLeft > 0);\r\n\r\n        // Show \"next\" icon if there's more content to scroll\r\n        setShowNextIcon(scrollLeft + clientWidth < scrollWidth - 1);\r\n      }\r\n    };\r\n\r\n    // Attach scroll event listener\r\n    const container = storiesContainerRef.current;\r\n    container.addEventListener(\"scroll\", handleScroll);\r\n\r\n    // Initial state update\r\n    handleScroll();\r\n\r\n    return () => {\r\n      // Cleanup event listener\r\n      container.removeEventListener(\"scroll\", handleScroll);\r\n    };\r\n  }, []);\r\n\r\n  const [mediaPreview, setMediaPreview] = useState(null);\r\n  const [storyMediaPreview, setStoryMediaPreview] = useState(null);\r\n\r\n  // const handlePost = () => {};\r\n\r\n  const [mediaFile, setMediaFile] = useState(null);\r\n  const [storyMediaFile, setStoryMediaFile] = useState(null);\r\n  const [media, setMedia] = useState(\"\");\r\n  const [caption, setCaption] = useState(\"\");\r\n  const [storyCaption, setStoryCaption] = useState(\"\");\r\n  const [selectedStory, setSelectedStory] = useState(null);\r\n  const [currentStoryIndex, setCurrentStoryIndex] = useState(0);\r\n\r\n  const handleMediaChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) {\r\n      return console.log(\"Please upload a file!\");\r\n    }\r\n\r\n    const formdata = new FormData();\r\n    formdata.append(\"media\", file);\r\n\r\n    try {\r\n      const data = await fetch(`${ENDPOINT}/api/post/media`, {\r\n        method: \"POST\",\r\n        body: formdata,\r\n      });\r\n      const response = await data.json();\r\n      if (response.success) {\r\n        setMedia(response.url);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n    setMediaPreview(URL.createObjectURL(file));\r\n    setMediaFile(file);\r\n  };\r\n\r\n  const handleStoryChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) {\r\n      return console.log(\"Please upload a file!\");\r\n    }\r\n\r\n    const formdata = new FormData();\r\n    formdata.append(\"media\", file);\r\n\r\n    try {\r\n      const data = await fetch(`${ENDPOINT}/api/post/media`, {\r\n        method: \"POST\",\r\n        body: formdata,\r\n      });\r\n      const response = await data.json();\r\n      if (response.success) {\r\n        setMedia(response.url);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n    setStoryMediaPreview(URL.createObjectURL(file));\r\n    setStoryMediaFile(file);\r\n  };\r\n\r\n  const handleCaptionChange = (e) => {\r\n    setCaption(e.target.value);\r\n  };\r\n\r\n  const handleStoryCaptionChange = (e) => {\r\n    setStoryCaption(e.target.value);\r\n  };\r\n\r\n  const handleCreatePost = async () => {\r\n    try {\r\n      const mediaType = mediaFile.type.startsWith(\"video/\") ? \"video\" : \"image\";\r\n      const token = localStorage.getItem(\"token\");\r\n      const parsedToken = JSON.parse(token);\r\n      const response = await fetch(`${ENDPOINT}/api/post/createPost`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"auth-token\": parsedToken,\r\n        },\r\n        body: JSON.stringify({\r\n          description: caption,\r\n          media: media,\r\n          mediaType: mediaType,\r\n        }),\r\n      });\r\n      const data = await response.json();\r\n      setMediaFile(null);\r\n      setMediaPreview(\"\");\r\n      setCaption(\"\");\r\n      // setUserPost([...userPost, data]);\r\n      // await handleFetchUserPosts();\r\n    } catch (error) {\r\n      console.log(\"Error:\", error.message);\r\n    }\r\n  };\r\n  const handleCreateStory = async () => {\r\n    try {\r\n      if (storyMediaFile && storyCaption) {\r\n        const response = await handleCreateStoryTextAndMedia(\r\n          media,\r\n          storyCaption\r\n        );\r\n        if (response.success) {\r\n          setStoryMediaFile(null);\r\n          setStoryMediaPreview(\"\");\r\n          setStoryCaption(\"\");\r\n        }\r\n      } else if (storyMediaFile) {\r\n        const response = await handleCreateStoryWithMediaOnly(media);\r\n        if (response.success) {\r\n          setStoryMediaFile(null);\r\n          setStoryMediaPreview(\"\");\r\n          setStoryCaption(\"\");\r\n        }\r\n      }\r\n\r\n      // setUserPost([...userPost, data]);\r\n      // await handleFetchUserPosts();\r\n    } catch (error) {\r\n      console.log(\"Error:\", error);\r\n    }\r\n  };\r\n\r\n  const handleStoryClick = (stories) => {\r\n    setSelectedStory(stories);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Main Content Section */}\r\n\r\n      <div className=\"flex min-h-screen sm:pl-72 sm:pt-24 max-w-7xl mx-auto sm:p-4\">\r\n        {/* Feed Section */}\r\n        {/* {console.log(uStories)}\r\n        {console.log(groupedStories)} */}\r\n\r\n        <div className=\"w-full bg-white p-4 rounded-lg shadow-lg\">\r\n          {/* Stories/Highlights */}\r\n          {/* Stories Section with Scroll Indicator */}\r\n          <div className=\"relative mb-6\">\r\n            <div\r\n              ref={storiesContainerRef}\r\n              className=\"flex space-x-4 overflow-x-auto scrollbar-hide whitespace-nowrap mb-4 py-2\"\r\n            >\r\n              {/* Story Upload Section */}\r\n              <div className=\"flex-shrink-0 w-24 h-24 bg-gray-300 rounded-full cursor-pointer relative\">\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"image/*,video/*\"\r\n                  onChange={handleStoryChange}\r\n                  className=\"absolute inset-0 opacity-0 cursor-pointer\"\r\n                />\r\n                <div className=\"flex items-center justify-center h-full text-gray-700\">\r\n                  <span className=\"text-xl font-bold\">+</span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Other Story Items */}\r\n              {groupedStories &&\r\n                groupedStories.map((story) => {\r\n                  return (\r\n                    <div\r\n                      key={story.user._id}\r\n                      className=\"flex-shrink-0 w-24 h-24 bg-gray-300 rounded-full cursor-pointer\"\r\n                      onClick={() => handleStoryClick(story)} // On click, display the stories\r\n                    >\r\n                      <img\r\n                        src={story.user.picture}\r\n                        alt=\"Failed to load profile img\"\r\n                        className=\"w-full h-full rounded-full object-cover border-2 border-transparent \r\n                  bg-gradient-to-r from-pink-600 via-yellow-500 to-pink-600 p-[2px] shadow-lg\"\r\n                      />\r\n                    </div>\r\n                  );\r\n                })}\r\n            </div>\r\n          </div>\r\n          {selectedStory && (\r\n            <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\">\r\n              <div className=\"relative max-w-3xl w-[90%] md:w-full bg-white p-4 rounded-lg shadow-2xl overflow-hidden\">\r\n                {/* Close Button */}\r\n                <button\r\n                  onClick={() => setSelectedStory(null)}\r\n                  className=\"absolute top-4 right-4 text-white text-2xl bg-black bg-opacity-50 px-5 py-1 rounded-lg hover:bg-opacity-75 transition\"\r\n                >\r\n                  &times;\r\n                </button>\r\n\r\n                {/* User Info */}\r\n                <div className=\"flex items-center mb-4 hover:cursor-pointer\">\r\n                  <img\r\n                    src={selectedStory.user.picture}\r\n                    alt=\"Failed to load img\"\r\n                    className=\"rounded-full h-14 w-14 mr-3\"\r\n                  />\r\n                  <div>\r\n                    <h2 className=\"text-lg font-semibold text-black\">\r\n                      {selectedStory.user.fullName}\r\n                    </h2>\r\n                    <p className=\"text-base text-gray-600\">\r\n                      @{selectedStory.user.userName}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Story Content with Navigation */}\r\n                <div className=\"flex flex-col items-center justify-center relative\">\r\n                  <div className=\"relative w-full max-w-3xl h-[75vh] bg-black rounded-lg overflow-hidden shadow-lg\">\r\n                    {/* Conditional Rendering for Media */}\r\n                    {selectedStory.stories[currentStoryIndex].imageUrl.endsWith(\r\n                      \".mp4\"\r\n                    ) ? (\r\n                      <video\r\n                        src={selectedStory.stories[currentStoryIndex].imageUrl}\r\n                        controls\r\n                        autoPlay\r\n                        className=\"w-full h-full object-contain rounded-lg\"\r\n                      />\r\n                    ) : (\r\n                      <img\r\n                        src={selectedStory.stories[currentStoryIndex].imageUrl}\r\n                        alt=\"Failed to load story\"\r\n                        className=\"w-full h-full object-contain rounded-lg\"\r\n                      />\r\n                    )}\r\n\r\n                    {/* Story Caption */}\r\n                    {selectedStory.stories[currentStoryIndex].text && (\r\n                      <p className=\"absolute bottom-14 left-4 text-white text-base font-semibold shadow-md max-w-[90%] bg-black bg-opacity-50 p-2 rounded-lg\">\r\n                        Caption: {selectedStory.stories[currentStoryIndex].text}\r\n                      </p>\r\n                    )}\r\n\r\n                    {/* Left Arrow (Previous Story) */}\r\n                    {currentStoryIndex > 0 && (\r\n                      <button\r\n                        onClick={() =>\r\n                          setCurrentStoryIndex(currentStoryIndex - 1)\r\n                        }\r\n                        className=\"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white text-3xl p-2 rounded-full hover:bg-opacity-75\"\r\n                      >\r\n                        &#9664;\r\n                      </button>\r\n                    )}\r\n\r\n                    {/* Right Arrow (Next Story) */}\r\n                    {currentStoryIndex < selectedStory.stories.length - 1 && (\r\n                      <button\r\n                        onClick={() =>\r\n                          setCurrentStoryIndex(currentStoryIndex + 1)\r\n                        }\r\n                        className=\"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white text-3xl p-2 rounded-full hover:bg-opacity-75\"\r\n                      >\r\n                        &#9654;\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"p-6 bg-white rounded-lg shadow-lg mt-2 mb-5\">\r\n            {/* Story Media Preview Section */}\r\n            {storyMediaPreview && (\r\n              <div className=\"mt-4\">\r\n                {storyMediaFile.type.startsWith(\"video/\") ? (\r\n                  <video\r\n                    src={storyMediaPreview}\r\n                    controls\r\n                    className=\"w-full h-auto rounded-lg\"\r\n                  />\r\n                ) : (\r\n                  <img\r\n                    src={storyMediaPreview}\r\n                    alt=\"Media Preview\"\r\n                    className=\"w-full h-auto rounded-lg\"\r\n                  />\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Story Text Caption */}\r\n            {storyMediaPreview && (\r\n              <textarea\r\n                className=\"mt-4 w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none text-black\"\r\n                placeholder=\"Write a caption...\"\r\n                value={storyCaption}\r\n                onChange={handleStoryCaptionChange}\r\n              />\r\n            )}\r\n\r\n            {/*Story Action Buttons */}\r\n            <div className=\"flex justify-end mt-4 space-x-3\">\r\n              {storyMediaFile && (\r\n                <>\r\n                  <button\r\n                    className=\"py-2 px-6 bg-gray-200 text-black rounded-lg hover:bg-gray-300\"\r\n                    onClick={() => {\r\n                      setStoryMediaFile(null);\r\n                      setStoryMediaPreview(\"\");\r\n                      setStoryCaption(\"\");\r\n                    }}\r\n                    disabled={!storyMediaFile}\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    className={`py-2 px-6 rounded-lg text-white ${\r\n                      storyMediaFile\r\n                        ? \"bg-blue-600 hover:bg-blue-700\"\r\n                        : \"bg-gray-400 cursor-not-allowed\"\r\n                    }`}\r\n                    onClick={handleCreateStory}\r\n                    disabled={!storyMediaFile}\r\n                  >\r\n                    Upload Story\r\n                  </button>\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            {/* Upload Section */}\r\n            {!storyMediaFile && (\r\n              <label\r\n                htmlFor=\"mediaUpload\"\r\n                className=\"cursor-pointer flex flex-col items-center justify-center border-2 border-dashed border-gray-300 p-6 rounded-lg hover:border-blue-500 transition\"\r\n              >\r\n                {mediaPreview ? (\r\n                  <p className=\"text-blue-500 font-semibold\">Change Media</p>\r\n                ) : (\r\n                  <>\r\n                    <svg\r\n                      className=\"w-12 h-12 text-gray-500\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                      <path d=\"M12 4v16m8-8H4\"></path>\r\n                    </svg>\r\n                    <p className=\"text-gray-600 mt-2 text-center\">\r\n                      Click to upload an image or video\r\n                    </p>\r\n                  </>\r\n                )}\r\n                <input\r\n                  type=\"file\"\r\n                  id=\"mediaUpload\"\r\n                  className=\"hidden\"\r\n                  accept=\"image/*, video/*\"\r\n                  onChange={handleMediaChange}\r\n                />\r\n              </label>\r\n            )}\r\n\r\n            {/* Media Preview Section */}\r\n            {mediaPreview && (\r\n              <div className=\"mt-4\">\r\n                {mediaFile.type.startsWith(\"video/\") ? (\r\n                  <video\r\n                    src={mediaPreview}\r\n                    controls\r\n                    className=\"w-full h-auto rounded-lg\"\r\n                  />\r\n                ) : (\r\n                  <img\r\n                    src={mediaPreview}\r\n                    alt=\"Media Preview\"\r\n                    className=\"w-full h-auto rounded-lg\"\r\n                  />\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Text Caption */}\r\n            {mediaPreview && (\r\n              <textarea\r\n                className=\"mt-4 w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none text-black\"\r\n                placeholder=\"Write a caption...\"\r\n                value={caption}\r\n                onChange={handleCaptionChange}\r\n              />\r\n            )}\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"flex justify-end mt-4 space-x-3\">\r\n              {mediaFile && (\r\n                <>\r\n                  <button\r\n                    className=\"py-2 px-6 bg-gray-200 text-black rounded-lg hover:bg-gray-300\"\r\n                    onClick={() => {\r\n                      setMediaFile(null);\r\n                      setMediaPreview(\"\");\r\n                      setCaption(\"\");\r\n                    }}\r\n                    disabled={!mediaFile}\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    className={`py-2 px-6 rounded-lg text-white ${\r\n                      mediaFile && caption\r\n                        ? \"bg-blue-600 hover:bg-blue-700\"\r\n                        : \"bg-gray-400 cursor-not-allowed\"\r\n                    }`}\r\n                    onClick={handleCreatePost}\r\n                    disabled={!mediaFile || !caption}\r\n                  >\r\n                    Create Post\r\n                  </button>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Feed Posts */}\r\n          <div className=\"space-y-4\">\r\n            {/* Sample Post */}\r\n            <div className=\"border-b pb-4\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"w-12 h-12 rounded-full bg-gray-300\"></div>\r\n                <div>\r\n                  <div className=\"font-semibold text-black\">User Name</div>\r\n                  <div className=\"text-sm text-gray-500\">2 hours ago</div>\r\n                </div>\r\n              </div>\r\n              <p className=\"mt-2 text-gray-700\">\r\n                This is a sample post content...\r\n              </p>\r\n              <div className=\"mt-2 flex space-x-6\">\r\n                <div className=\"flex items-center space-x-1 text-gray-700\">\r\n                  <FontAwesomeIcon icon={faThumbsUp} className=\"text-xl\" />\r\n                  <span>12</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-1 text-gray-700\">\r\n                  <FontAwesomeIcon icon={faComment} className=\"text-xl\" />\r\n                  <span>5</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* Add more posts here */}\r\n            <div className=\"border-b pb-4\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"w-12 h-12 rounded-full bg-gray-300\"></div>\r\n                <div>\r\n                  <div className=\"font-semibold text-black\">User Name</div>\r\n                  <div className=\"text-sm text-gray-500\">2 hours ago</div>\r\n                </div>\r\n              </div>\r\n              <p className=\"mt-2 text-gray-700\">\r\n                This is a sample post content...\r\n              </p>\r\n              <div className=\"mt-2 flex space-x-6\">\r\n                <div className=\"flex items-center space-x-1 text-gray-700\">\r\n                  <FontAwesomeIcon icon={faThumbsUp} className=\"text-xl\" />\r\n                  <span>12</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-1 text-gray-700\">\r\n                  <FontAwesomeIcon icon={faComment} className=\"text-xl\" />\r\n                  <span>5</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"border-b pb-4\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"w-12 h-12 rounded-full bg-gray-300\"></div>\r\n                <div>\r\n                  <div className=\"font-semibold text-black\">User Name</div>\r\n                  <div className=\"text-sm text-gray-500\">2 hours ago</div>\r\n                </div>\r\n              </div>\r\n              <p className=\"mt-2 text-gray-700\">\r\n                This is a sample post content...\r\n              </p>\r\n              <div className=\"mt-2 flex space-x-6\">\r\n                <div className=\"flex items-center space-x-1 text-gray-700\">\r\n                  <FontAwesomeIcon icon={faThumbsUp} className=\"text-xl\" />\r\n                  <span>12</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-1 text-gray-700\">\r\n                  <FontAwesomeIcon icon={faComment} className=\"text-xl\" />\r\n                  <span>5</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"border-b pb-4\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"w-12 h-12 rounded-full bg-gray-300\"></div>\r\n                <div>\r\n                  <div className=\"font-semibold text-black\">User Name</div>\r\n                  <div className=\"text-sm text-gray-500\">2 hours ago</div>\r\n                </div>\r\n              </div>\r\n              <p className=\"mt-2 text-gray-700\">\r\n                This is a sample post content...\r\n              </p>\r\n              <div className=\"mt-2 flex space-x-6\">\r\n                <div className=\"flex items-center space-x-1 text-gray-700\">\r\n                  <FontAwesomeIcon icon={faThumbsUp} className=\"text-xl\" />\r\n                  <span>12</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-1 text-gray-700\">\r\n                  <FontAwesomeIcon icon={faComment} className=\"text-xl\" />\r\n                  <span>5</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}