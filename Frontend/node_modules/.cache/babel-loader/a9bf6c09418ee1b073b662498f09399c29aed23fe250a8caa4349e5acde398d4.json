{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ahmad12\\\\Documents\\\\Vividly\\\\Frontend\\\\src\\\\Components\\\\Home.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useRef, useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport vividlyContext from \"../Context/vividlyContext\";\nimport Avatar from \"../Images/Avatar.jpeg\";\n// import { io } from \"socket.io-client\";\n\nimport { faHeart as LikeHeart } from \"@fortawesome/free-solid-svg-icons\";\nimport { faComment, faPaperPlane } from \"@fortawesome/free-regular-svg-icons\";\nimport { faTrashAlt, faHeart } from \"@fortawesome/free-regular-svg-icons\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  // useEffect(() => {\n  //   const socket = io(\"http://localhost:5000\");\n\n  //   socket.emit(\"message\", \"Bilal\");\n  //   socket.on(\"response\", (data) => {\n  //     console.log(\"Server Response:\", data);\n  //   });\n  //   return () => {\n  //     socket.disconnect();\n  //   };\n  // }, []);\n\n  const context = useContext(vividlyContext);\n  const {\n    handleCreateStoryWithMediaOnly,\n    handleCreateStoryTextAndMedia,\n    handleDelStory,\n    handleFollowedUserPosts\n  } = context;\n  const id = localStorage.getItem(\"id\");\n  const parsedId = JSON.parse(id);\n  const [showPrevIcon, setShowPrevIcon] = useState(false);\n  const [showNextIcon, setShowNextIcon] = useState(true);\n  const storiesContainerRef = useRef(null);\n  const [userProfile, setUserProfile] = useState(\"\");\n  const [groupedStories, setGroupedStories] = useState([]);\n  const processStories = stories => {\n    const newGroupedStories = {};\n    stories.forEach(story => {\n      if (!newGroupedStories[story.user._id]) {\n        newGroupedStories[story.user._id] = {\n          user: story.user,\n          stories: []\n        };\n      }\n      newGroupedStories[story.user._id].stories.push(story);\n    });\n    setGroupedStories(prevStories => {\n      const updatedStories = {\n        ...prevStories.reduce((acc, group) => {\n          acc[group.user._id] = group;\n          return acc;\n        }, {})\n      };\n      Object.values(newGroupedStories).forEach(group => {\n        if (!updatedStories[group.user._id]) {\n          updatedStories[group.user._id] = group;\n        } else {\n          const existingStoryIds = new Set(updatedStories[group.user._id].stories.map(story => story._id));\n          group.stories.forEach(story => {\n            if (!existingStoryIds.has(story._id)) {\n              updatedStories[group.user._id].stories.push(story);\n            }\n          });\n        }\n      });\n      return Object.values(updatedStories);\n    });\n  };\n  const handleFetchFollowedUserStories = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const parsedToken = JSON.parse(token);\n      const response = await fetch(`${ENDPOINT}/api/story/getFollowUserStories`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": parsedToken\n        }\n      });\n      const data = await response.json();\n      if (data.success && data.message !== \"No stories found for the users you're following.\") {\n        processStories(data.stories);\n      }\n    } catch (error) {\n      console.log(\"Error:\", error);\n    }\n  };\n  const handleFetchUserStories = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const parsedToken = JSON.parse(token);\n      const response = await fetch(`${ENDPOINT}/api/story/getUStories`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": parsedToken\n        }\n      });\n      const data = await response.json();\n      if (data.success) {\n        processStories(data.stories);\n      }\n    } catch (error) {\n      console.log(\"Error:\", error.message);\n    }\n  };\n  const handlefetchUserProfile = async () => {\n    const id = localStorage.getItem(\"id\");\n    const parsedId = JSON.parse(id);\n    const token = localStorage.getItem(\"token\");\n    const parsedToken = JSON.parse(token);\n    try {\n      const response = await fetch(`${ENDPOINT}/api/user/getUserProfile/${parsedId}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": parsedToken\n        }\n      });\n      const data = await response.json();\n      if (data.success) {\n        setUserProfile(data);\n      } else {\n        console.log(\"Error\");\n      }\n    } catch (error) {\n      console.log(\"Error:\", error.message);\n    }\n  };\n  useEffect(() => {\n    handlefetchUserProfile();\n    handleFetchFollowedUserStories();\n    handleFetchUserStories();\n    handleFollowedUserPostDetails();\n  }, []);\n  const ENDPOINT = process.env.REACT_APP_ENDPOINT;\n  useEffect(() => {\n    const handleScroll = () => {\n      if (storiesContainerRef.current) {\n        const {\n          scrollLeft,\n          scrollWidth,\n          clientWidth\n        } = storiesContainerRef.current;\n\n        // Show \"prev\" icon if scrollLeft > 0\n        setShowPrevIcon(scrollLeft > 0);\n\n        // Show \"next\" icon if there's more content to scroll\n        setShowNextIcon(scrollLeft + clientWidth < scrollWidth - 1);\n      }\n    };\n\n    // Attach scroll event listener\n    const container = storiesContainerRef.current;\n    container.addEventListener(\"scroll\", handleScroll);\n\n    // Initial state update\n    handleScroll();\n    return () => {\n      // Cleanup event listener\n      container.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, []);\n  const [mediaPreview, setMediaPreview] = useState(null);\n  const [storyMediaPreview, setStoryMediaPreview] = useState(null);\n  const [mediaFile, setMediaFile] = useState(null);\n  const [storyMediaFile, setStoryMediaFile] = useState(null);\n  const [media, setMedia] = useState(\"\");\n  const [caption, setCaption] = useState(\"\");\n  const [storyCaption, setStoryCaption] = useState(\"\");\n  const [selectedStory, setSelectedStory] = useState(null);\n  const [currentStoryIndex, setCurrentStoryIndex] = useState(0);\n  const handleMediaChange = async e => {\n    const file = e.target.files[0];\n    if (!file) {\n      return console.log(\"Please upload a file!\");\n    }\n    const formdata = new FormData();\n    formdata.append(\"media\", file);\n    try {\n      const data = await fetch(`${ENDPOINT}/api/post/media`, {\n        method: \"POST\",\n        body: formdata\n      });\n      const response = await data.json();\n      if (response.success) {\n        setMedia(response.url);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n    setMediaPreview(URL.createObjectURL(file));\n    setMediaFile(file);\n  };\n  const handleStoryChange = async e => {\n    const file = e.target.files[0];\n    if (!file) {\n      return console.log(\"Please upload a file!\");\n    }\n    const formdata = new FormData();\n    formdata.append(\"media\", file);\n    try {\n      const data = await fetch(`${ENDPOINT}/api/post/media`, {\n        method: \"POST\",\n        body: formdata\n      });\n      const response = await data.json();\n      if (response.success) {\n        setMedia(response.url);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n    setStoryMediaPreview(URL.createObjectURL(file));\n    setStoryMediaFile(file);\n  };\n  const handleCaptionChange = e => {\n    setCaption(e.target.value);\n  };\n  const handleStoryCaptionChange = e => {\n    setStoryCaption(e.target.value);\n  };\n  const handleCreatePost = async () => {\n    try {\n      const mediaType = mediaFile.type.startsWith(\"video/\") ? \"video\" : \"image\";\n      const token = localStorage.getItem(\"token\");\n      const parsedToken = JSON.parse(token);\n      const response = await fetch(`${ENDPOINT}/api/post/createPost`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": parsedToken\n        },\n        body: JSON.stringify({\n          description: caption,\n          media: media,\n          mediaType: mediaType\n        })\n      });\n      const data = await response.json();\n      setMediaFile(null);\n      setMediaPreview(\"\");\n      setCaption(\"\");\n      // setUserPost([...userPost, data]);\n      // await handleFetchUserPosts();\n    } catch (error) {\n      console.log(\"Error:\", error.message);\n    }\n  };\n  const handleCreateStory = async () => {\n    try {\n      if (storyMediaFile && storyCaption) {\n        const response = await handleCreateStoryTextAndMedia(media, storyCaption);\n        if (response.success) {\n          setStoryMediaFile(null);\n          setStoryMediaPreview(\"\");\n          setStoryCaption(\"\");\n        }\n      } else if (storyMediaFile) {\n        const response = await handleCreateStoryWithMediaOnly(media);\n        if (response.success) {\n          setStoryMediaFile(null);\n          setStoryMediaPreview(\"\");\n          setStoryCaption(\"\");\n        }\n      }\n      await handleFetchUserStories();\n\n      // setUserPost([...userPost, data]);\n      // await handleFetchUserPosts();\n    } catch (error) {\n      console.log(\"Error:\", error);\n    }\n  };\n  const handleStoryClick = stories => {\n    setSelectedStory(stories);\n  };\n  const handleDeleteStory = async storyId => {\n    const response = await handleDelStory(storyId);\n    if (response.success) {\n      if (selectedStory.stories.length > 1) {\n        setSelectedStory({\n          ...selectedStory,\n          stories: selectedStory.stories.filter(s => s._id !== storyId)\n        });\n      } else {\n        setSelectedStory(null);\n        setGroupedStories(groupedStories.filter(s => s.user._id !== parsedId));\n      }\n    }\n  };\n  const handleFetchPostLikes = async postId => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const parsedToken = JSON.parse(token);\n      const response = await fetch(`${ENDPOINT}/api/post/fetchPostLikes/${postId}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": parsedToken\n        }\n      });\n      const data = await response.json();\n      if (data.success) {\n        return data.postLikes.likes;\n      }\n    } catch (error) {\n      console.log(\"Error:\", error.message);\n    }\n  };\n  const handleLikePost = async postId => {\n    const token = localStorage.getItem(\"token\");\n    const parsedToken = JSON.parse(token);\n    const data = await fetch(`${ENDPOINT}/api/post/likePost/${postId}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"auth-token\": parsedToken\n      }\n    });\n    const response = await data.json();\n    const userId = localStorage.getItem(\"id\");\n    const parsedUserId = JSON.parse(userId);\n    const post = fUserPostDetails.find(post => post._id === postId);\n    if (post) {\n      const userAlreadyLiked = post.likes.some(like => like.user === parsedUserId);\n      if (userAlreadyLiked) {\n        setFUserPostDetails(fUserPostDetails.map(p => p._id === postId ? {\n          ...p,\n          likes: p.likes.filter(like => like.user !== parsedUserId),\n          likeStatus: \"Not Liked\"\n        } : p));\n      } else {\n        setFUserPostDetails(fUserPostDetails.map(p => p._id === postId ? {\n          ...p,\n          likes: [...p.likes, {\n            user: parsedUserId\n          }],\n          likeStatus: \"Liked\"\n        } : p));\n      }\n    }\n    return response;\n  };\n  const handleFetchPostComments = async postId => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const parsedToken = JSON.parse(token);\n      const response = await fetch(`${ENDPOINT}/api/post/fetchPostComments/${postId}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": parsedToken\n        }\n      });\n      const data = await response.json();\n      if (data.success) {\n        return data.postComments.comments; // Return the likes for a given post\n      }\n    } catch (error) {\n      console.log(\"Error:\", error.message);\n    }\n  };\n  const [fUserPostDetails, setFUserPostDetails] = useState([]);\n  const handleFollowedUserPostDetails = async () => {\n    const posts = await handleFollowedUserPosts();\n    const postsWithDetails = await Promise.all(posts.map(async post => {\n      const likes = await handleFetchPostLikes(post._id);\n      const comments = await handleFetchPostComments(post._id);\n      let likeStatus = likes.some(like => like.user === parsedId) ? \"Liked\" : \"Not Liked\";\n      return {\n        ...post,\n        likes,\n        comments,\n        likeStatus\n      };\n    }));\n    setFUserPostDetails(postsWithDetails);\n  };\n  const [specificPostComments, setSpecificPostComments] = useState([]);\n  const handleSpecificPostComments = id => {\n    const post = fUserPostDetails.find(post => post._id === id);\n    setSpecificPostComments(post.comments);\n  };\n  const [cText, setCText] = useState(\"\");\n  const handleCommentOnChange = e => {\n    setCText(e.target.value);\n  };\n  const handleAddComment = async (postId, text, event) => {\n    const token = localStorage.getItem(\"token\");\n    const parsedToken = JSON.parse(token);\n    if (event.key === \"Enter\" || event.key === \"enter\") {\n      setCText(\"\");\n      try {\n        const response = await fetch(`${ENDPOINT}/api/post/commentOnPost/${postId}`, {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"auth-token\": parsedToken\n          },\n          body: JSON.stringify({\n            text\n          })\n        });\n        const data = await response.json();\n        if (data.success) {\n          setSpecificPostComments(data.updatedComment.comments);\n          setFUserPostDetails(fUserPostDetails.map(p => p._id === postId ? {\n            ...p,\n            comments: data.updatedComment.comments\n          } : p));\n        }\n      } catch (error) {\n        console.log(\"Error:\", error.message);\n      }\n    }\n  };\n  const [specificPostId, setSpecificPosId] = useState(\"\");\n  const handleStoreSpecificPostId = id => {\n    setSpecificPosId(id);\n  };\n  function timeAgo(date) {\n    const now = new Date();\n    const diffInSeconds = Math.floor((now - new Date(date)) / 1000);\n    if (diffInSeconds < 60) {\n      return `${diffInSeconds} seconds ago`;\n    }\n    const diffInMinutes = Math.floor(diffInSeconds / 60);\n    if (diffInMinutes < 60) {\n      return `${diffInMinutes} minute${diffInMinutes > 1 ? \"s\" : \"\"} ago`;\n    }\n    const diffInHours = Math.floor(diffInMinutes / 60);\n    if (diffInHours < 24) {\n      return `${diffInHours} hour${diffInHours > 1 ? \"s\" : \"\"} ago`;\n    }\n    const diffInDays = Math.floor(diffInHours / 24);\n    if (diffInDays < 30) {\n      return `${diffInDays} day${diffInDays > 1 ? \"s\" : \"\"} ago`;\n    }\n    const diffInMonths = Math.floor(diffInDays / 30);\n    if (diffInMonths < 12) {\n      return `${diffInMonths} month${diffInMonths > 1 ? \"s\" : \"\"} ago`;\n    }\n    const diffInYears = Math.floor(diffInMonths / 12);\n    return `${diffInYears} year${diffInYears > 1 ? \"s\" : \"\"} ago`;\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex min-h-screen sm:pl-72 sm:pt-24 max-w-7xl mx-auto sm:p-4\",\n      children: [console.log(fUserPostDetails), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full bg-white p-4 rounded-lg shadow-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative mb-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: storiesContainerRef,\n            className: \"flex space-x-4 overflow-x-auto scrollbar-hide whitespace-nowrap mb-4 py-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-shrink-0 w-24 h-24 bg-gray-300 rounded-full cursor-pointer relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/*,video/*\",\n                onChange: handleStoryChange,\n                className: \"absolute inset-0 opacity-0 cursor-pointer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 557,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center h-full text-gray-700\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xl font-bold\",\n                  children: \"+\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 564,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 563,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 556,\n              columnNumber: 15\n            }, this), groupedStories && groupedStories.map(story => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-shrink-0 w-24 h-24 bg-gray-300 rounded-full cursor-pointer\",\n                onClick: () => handleStoryClick(story) // On click, display the stories\n                ,\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: story.user.picture,\n                  alt: \"Failed to load profile img\",\n                  className: \"w-full h-full rounded-full object-cover border-2 border-transparent \\r bg-gradient-to-r from-pink-600 via-yellow-500 to-pink-600 p-[2px] shadow-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 577,\n                  columnNumber: 23\n                }, this)\n              }, story.user._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 572,\n                columnNumber: 21\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 551,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 11\n        }, this), selectedStory && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative max-w-3xl w-[90%] md:w-full bg-white p-4 rounded-lg shadow-2xl overflow-hidden\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setSelectedStory(null);\n                setCurrentStoryIndex(0);\n              },\n              className: \"absolute top-4 right-4 text-white text-2xl bg-black bg-opacity-50 px-5 py-1 rounded-lg hover:bg-opacity-75 transition\",\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 593,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-4 hover:cursor-pointer relative mt-12\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: selectedStory.user.picture,\n                  alt: \"Failed to load img\",\n                  className: \"rounded-full h-14 w-14 mr-3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 607,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    className: \"text-lg font-semibold text-black\",\n                    children: selectedStory.user.fullName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 613,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-base text-gray-600\",\n                    children: [\"@\", selectedStory.user.userName]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 616,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 612,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 19\n              }, this), selectedStory.user._id === parsedId && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDeleteStory(selectedStory.stories[currentStoryIndex]._id),\n                className: \"relative flex items-center justify-center text-white text-2xl ml-4 p-3 rounded-full transition-all duration-300 transform hover:scale-105 hover:shadow-lg\",\n                title: \"Delete Story\",\n                style: {\n                  background: \"linear-gradient(135deg, #ff416c, #ff4b2b)\",\n                  boxShadow: \"0 4px 15px rgba(255, 75, 43, 0.5)\"\n                },\n                children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faTrashAlt\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 637,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 624,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 604,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col items-center justify-center relative\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative w-full max-w-3xl h-[70vh] bg-black rounded-lg overflow-hidden shadow-lg\",\n                children: [selectedStory.stories[currentStoryIndex].imageUrl.endsWith(\".mp4\") ? /*#__PURE__*/_jsxDEV(\"video\", {\n                  src: selectedStory.stories[currentStoryIndex].imageUrl,\n                  controls: true,\n                  autoPlay: true,\n                  className: \"w-full h-full object-contain rounded-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 649,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: selectedStory.stories[currentStoryIndex].imageUrl,\n                  alt: \"Failed to load story\",\n                  className: \"w-full h-full object-contain rounded-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 656,\n                  columnNumber: 23\n                }, this), selectedStory.stories[currentStoryIndex].text && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"absolute bottom-14 left-4 text-white text-base font-semibold shadow-md max-w-[90%] bg-black bg-opacity-50 p-2 rounded-lg\",\n                  children: [\"Caption: \", selectedStory.stories[currentStoryIndex].text]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 665,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"absolute top-4 left-4 text-sm text-white bg-black bg-opacity-50 px-2 py-1 rounded-lg\",\n                  children: new Date(selectedStory.stories[currentStoryIndex].createdAt).toLocaleDateString(\"en-GB\", {\n                    day: \"2-digit\",\n                    month: \"long\",\n                    year: \"numeric\"\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 671,\n                  columnNumber: 21\n                }, this), currentStoryIndex > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setCurrentStoryIndex(currentStoryIndex - 1),\n                  className: \"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white text-3xl p-2 rounded-full hover:bg-opacity-75\",\n                  children: \"\\u25C0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 683,\n                  columnNumber: 23\n                }, this), currentStoryIndex < selectedStory.stories.length - 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setCurrentStoryIndex(currentStoryIndex + 1),\n                  className: \"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white text-3xl p-2 rounded-full hover:bg-opacity-75\",\n                  children: \"\\u25B6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 695,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 644,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 643,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 bg-white rounded-lg shadow-lg mt-2 mb-5\",\n          children: [storyMediaPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4\",\n            children: storyMediaFile.type.startsWith(\"video/\") ? /*#__PURE__*/_jsxDEV(\"video\", {\n              src: storyMediaPreview,\n              controls: true,\n              className: \"w-full h-auto rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 715,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              src: storyMediaPreview,\n              alt: \"Media Preview\",\n              className: \"w-full h-auto rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 721,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 713,\n            columnNumber: 15\n          }, this), storyMediaPreview && /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"mt-4 w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none text-black\",\n            placeholder: \"Write a caption...\",\n            value: storyCaption,\n            onChange: handleStoryCaptionChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 732,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end mt-4 space-x-3\",\n            children: storyMediaFile && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"py-2 px-6 bg-gray-200 text-black rounded-lg hover:bg-gray-300\",\n                onClick: () => {\n                  setStoryMediaFile(null);\n                  setStoryMediaPreview(\"\");\n                  setStoryCaption(\"\");\n                },\n                disabled: !storyMediaFile,\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 744,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `py-2 px-6 rounded-lg text-white ${storyMediaFile ? \"bg-blue-600 hover:bg-blue-700\" : \"bg-gray-400 cursor-not-allowed\"}`,\n                onClick: handleCreateStory,\n                disabled: !storyMediaFile,\n                children: \"Upload Story\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 755,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 741,\n            columnNumber: 13\n          }, this), !storyMediaFile && /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"mediaUpload\",\n            className: \"cursor-pointer flex flex-col items-center justify-center border-2 border-dashed border-gray-300 p-6 rounded-lg hover:border-blue-500 transition\",\n            children: [mediaPreview ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-blue-500 font-semibold\",\n              children: \"Change Media\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 777,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-12 h-12 text-gray-500\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                viewBox: \"0 0 24 24\",\n                xmlns: \"http://www.w3.org/2000/svg\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M12 4v16m8-8H4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 788,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 780,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600 mt-2 text-center\",\n                children: \"Click to upload an image or video\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 790,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              id: \"mediaUpload\",\n              className: \"hidden\",\n              accept: \"image/*, video/*\",\n              onChange: handleMediaChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 795,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 772,\n            columnNumber: 15\n          }, this), mediaPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4\",\n            children: mediaFile.type.startsWith(\"video/\") ? /*#__PURE__*/_jsxDEV(\"video\", {\n              src: mediaPreview,\n              controls: true,\n              className: \"w-full h-auto rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 809,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              src: mediaPreview,\n              alt: \"Media Preview\",\n              className: \"w-full h-auto rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 815,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 807,\n            columnNumber: 15\n          }, this), mediaPreview && /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"mt-4 w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none text-black\",\n            placeholder: \"Write a caption...\",\n            value: caption,\n            onChange: handleCaptionChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 826,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end mt-4 space-x-3\",\n            children: mediaFile && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"py-2 px-6 bg-gray-200 text-black rounded-lg hover:bg-gray-300\",\n                onClick: () => {\n                  setMediaFile(null);\n                  setMediaPreview(\"\");\n                  setCaption(\"\");\n                },\n                disabled: !mediaFile,\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 838,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `py-2 px-6 rounded-lg text-white ${mediaFile && caption ? \"bg-blue-600 hover:bg-blue-700\" : \"bg-gray-400 cursor-not-allowed\"}`,\n                onClick: handleCreatePost,\n                disabled: !mediaFile || !caption,\n                children: \"Create Post\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 849,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 835,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 710,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"dialog\", {\n          id: \"addComment_Modal\",\n          className: \"modal\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-box min-h-[80vh] overflow-hidden bg-white rounded-lg shadow-lg relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"form\", {\n              method: \"dialog\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-sm btn-circle btn-ghost absolute right-4 top-4 text-black hover:bg-opacity-70 transition\",\n                children: \"\\u2715\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 867,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 866,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-center mb-5\",\n              children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"cus-font text-black font-semibold text-4xl mb-4\",\n                children: \"Add a comment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 873,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 872,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3 overflow-y-auto max-h-[60vh] pr-2 mb-[80px]\",\n              children: specificPostComments.length > 0 ? specificPostComments.map(cData => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex bg-gray-100 rounded-xl p-2 shadow-md border border-gray-300 hover:bg-gray-200 transition\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: cData.userPic,\n                  alt: \"Failed to load user img\",\n                  className: \"rounded-full h-16 w-16 border-2 border-gray-400\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 885,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-col ml-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-semibold text-black\",\n                    children: cData.userName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 891,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-700\",\n                    children: cData.text\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 894,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 890,\n                  columnNumber: 23\n                }, this)]\n              }, cData._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 881,\n                columnNumber: 21\n              }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-center items-center h-[55vh] custom-font text-2xl sm:text-3xl text-gray-600\",\n                children: \"No Comments Here\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 899,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 878,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute bottom-5 left-0 w-full px-4\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"w-full rounded-full bg-gray-100 focus:ring-1  focus:ring-blue-500 py-2 px-4 text-black shadow-md focus:outline-none transition\",\n                type: \"text\",\n                placeholder: \"Add a comment\",\n                value: cText,\n                onChange: handleCommentOnChange,\n                onKeyDown: event => handleAddComment(specificPostId, cText, event)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 907,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 906,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 865,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 864,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-8xl mx-auto py-10\",\n          children: fUserPostDetails.map(post => {\n            var _post$likes, _post$comments;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white rounded-lg shadow-lg p-6 mb-6 border border-gray-200 hover:shadow-xl transition-all duration-300\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center mb-4 hover:cursor-pointer bg-gray-50 p-2 rounded-2xl\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-14 h-14\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: post.userId.picture || Avatar,\n                    className: \"h-14 mb-4 w-14 rounded-full shadow-md\",\n                    alt: \"Failed to load img\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 929,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 928,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ml-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    className: \"text-lg font-semibold text-gray-800\",\n                    children: post.userId.userName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 937,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500\",\n                    children: timeAgo(post.createdAt)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 940,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 936,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 927,\n                columnNumber: 17\n              }, this), post.media && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-4\",\n                children: post.media.endsWith(\".mp4\") ? /*#__PURE__*/_jsxDEV(\"video\", {\n                  src: post.media,\n                  controls: true,\n                  className: \"w-full rounded-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 949,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: post.media,\n                  alt: \"Post Media\",\n                  className: \"w-full rounded-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 955,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 947,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-800 text-base font-semibold leading-relaxed mb-3 p-1 bg-white rounded-lg transition-all duration-300\",\n                children: post.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 964,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center pl-1 space-x-6 text-gray-600\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-4\",\n                  children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                    icon: post.likeStatus === \"Liked\" ? LikeHeart : faHeart,\n                    className: `text-2xl cursor-pointer ${post.likeStatus === \"Liked\" ? \"text-red-600\" : \"text-gray-600\"} hover:scale-110 transition-transform`,\n                    onClick: () => handleLikePost(post._id)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 970,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-lg text-gray-700\",\n                    children: (_post$likes = post.likes) === null || _post$likes === void 0 ? void 0 : _post$likes.length\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 980,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                    icon: faComment,\n                    className: \"text-2xl cursor-pointer text-gray-600 hover:text-blue-500\",\n                    onClick: () => {\n                      handleSpecificPostComments(post._id);\n                      handleStoreSpecificPostId(post._id);\n                      document.getElementById(\"addComment_Modal\").showModal();\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 984,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-lg text-gray-700\",\n                    children: (_post$comments = post.comments) === null || _post$comments === void 0 ? void 0 : _post$comments.length\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 993,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 969,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faPaperPlane,\n                  className: \"text-2xl cursor-pointer text-gray-600 hover:text-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 999,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 968,\n                columnNumber: 17\n              }, this)]\n            }, post._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 923,\n              columnNumber: 15\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 921,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n// const FeedPost = ({\n//   postId,\n//   picture,\n//   userName,\n//   postTime,\n//   postContent,\n//   postMedia,\n//   likeStatus,\n//   countLikes,\n//   countComments,\n// }) => {\n//   const formattedTime = timeAgo(postTime); // Convert the post time to a human-readable format\n\n//   return (\n//     <div className=\"bg-white rounded-lg shadow-lg p-6 mb-6 border border-gray-200 hover:shadow-xl transition-all duration-300\">\n//       <div className=\"flex items-center mb-4 hover:cursor-pointer bg-gray-50 p-2 rounded-2xl\">\n//         <div className=\"w-14 h-14\">\n//           <img\n//             src={picture || Avatar}\n//             className=\"h-14 mb-4 w-14 rounded-full shadow-md\"\n//             alt=\"Failed to load img\"\n//           />\n//         </div>\n\n//         <div className=\"ml-4\">\n//           <h2 className=\"text-lg font-semibold text-gray-800\">{userName}</h2>\n//           <p className=\"text-sm text-gray-500\">{formattedTime}</p>\n//         </div>\n//       </div>\n\n//       {postMedia && (\n//         <div className=\"mb-4\">\n//           {postMedia.endsWith(\".mp4\") ? (\n//             <video src={postMedia} controls className=\"w-full rounded-lg\" />\n//           ) : (\n//             <img\n//               src={postMedia}\n//               alt=\"Post Media\"\n//               className=\"w-full rounded-lg\"\n//             />\n//           )}\n//         </div>\n//       )}\n\n//       <p className=\"text-gray-800 text-base font-semibold leading-relaxed mb-3 p-1 bg-white rounded-lg transition-all duration-300\">\n//         {postContent}\n//       </p>\n\n//       <div className=\"flex items-center pl-1 space-x-6 text-gray-600\">\n//         <div className=\"flex items-center space-x-4\">\n//           <FontAwesomeIcon\n//             icon={likeStatus === \"Liked\" ? LikeHeart : faHeart}\n//             className={`text-2xl cursor-pointer ${\n//               likeStatus === \"Liked\" ? \"text-red-600\" : \"text-gray-600\"\n//             } hover:scale-110 transition-transform`}\n//             onClick={() => handleLikePost(postId)}\n//           />\n\n//           <span className=\"text-lg text-gray-700\">{countLikes?.length}</span>\n\n//           <FontAwesomeIcon\n//             icon={faComment}\n//             className=\"text-2xl cursor-pointer text-gray-600 hover:text-blue-500\"\n//             onClick={() => {\n//               // handleSpecificPostComments(postId);\n//               // handleStoreSpecificPostId(postId);\n//               document.getElementById(\"addComment_Modal\").showModal();\n//             }}\n//           />\n//           <span className=\"text-lg text-gray-700\">{countComments?.length}</span>\n//         </div>\n\n//         {/* Share Button */}\n//         <FontAwesomeIcon\n//           icon={faPaperPlane}\n//           className=\"text-2xl cursor-pointer text-gray-600 hover:text-blue-500\"\n//         />\n//       </div>\n//     </div>\n//   );\n// };\n_s(Home, \"lcEHiKUI8Qq1InshUN9pPIodzzQ=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useContext","useEffect","useRef","useState","FontAwesomeIcon","vividlyContext","Avatar","faHeart","LikeHeart","faComment","faPaperPlane","faTrashAlt","jsxDEV","_jsxDEV","Fragment","_Fragment","Home","_s","context","handleCreateStoryWithMediaOnly","handleCreateStoryTextAndMedia","handleDelStory","handleFollowedUserPosts","id","localStorage","getItem","parsedId","JSON","parse","showPrevIcon","setShowPrevIcon","showNextIcon","setShowNextIcon","storiesContainerRef","userProfile","setUserProfile","groupedStories","setGroupedStories","processStories","stories","newGroupedStories","forEach","story","user","_id","push","prevStories","updatedStories","reduce","acc","group","Object","values","existingStoryIds","Set","map","has","handleFetchFollowedUserStories","token","parsedToken","response","fetch","ENDPOINT","method","headers","data","json","success","message","error","console","log","handleFetchUserStories","handlefetchUserProfile","handleFollowedUserPostDetails","process","env","REACT_APP_ENDPOINT","handleScroll","current","scrollLeft","scrollWidth","clientWidth","container","addEventListener","removeEventListener","mediaPreview","setMediaPreview","storyMediaPreview","setStoryMediaPreview","mediaFile","setMediaFile","storyMediaFile","setStoryMediaFile","media","setMedia","caption","setCaption","storyCaption","setStoryCaption","selectedStory","setSelectedStory","currentStoryIndex","setCurrentStoryIndex","handleMediaChange","e","file","target","files","formdata","FormData","append","body","url","URL","createObjectURL","handleStoryChange","handleCaptionChange","value","handleStoryCaptionChange","handleCreatePost","mediaType","type","startsWith","stringify","description","handleCreateStory","handleStoryClick","handleDeleteStory","storyId","length","filter","s","handleFetchPostLikes","postId","postLikes","likes","handleLikePost","userId","parsedUserId","post","fUserPostDetails","find","userAlreadyLiked","some","like","setFUserPostDetails","p","likeStatus","handleFetchPostComments","postComments","comments","posts","postsWithDetails","Promise","all","specificPostComments","setSpecificPostComments","handleSpecificPostComments","cText","setCText","handleCommentOnChange","handleAddComment","text","event","key","updatedComment","specificPostId","setSpecificPosId","handleStoreSpecificPostId","timeAgo","date","now","Date","diffInSeconds","Math","floor","diffInMinutes","diffInHours","diffInDays","diffInMonths","diffInYears","children","className","ref","accept","onChange","fileName","_jsxFileName","lineNumber","columnNumber","onClick","src","picture","alt","fullName","userName","title","style","background","boxShadow","icon","imageUrl","endsWith","controls","autoPlay","createdAt","toLocaleDateString","day","month","year","placeholder","disabled","htmlFor","fill","stroke","strokeWidth","viewBox","xmlns","d","cData","userPic","onKeyDown","_post$likes","_post$comments","document","getElementById","showModal","_c","$RefreshReg$"],"sources":["C:/Users/Ahmad12/Documents/Vividly/Frontend/src/Components/Home.js"],"sourcesContent":["import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport vividlyContext from \"../Context/vividlyContext\";\r\nimport Avatar from \"../Images/Avatar.jpeg\";\r\n// import { io } from \"socket.io-client\";\r\n\r\nimport { faHeart as LikeHeart } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { faComment, faPaperPlane } from \"@fortawesome/free-regular-svg-icons\";\r\nimport { faTrashAlt, faHeart } from \"@fortawesome/free-regular-svg-icons\";\r\n\r\nconst Home = () => {\r\n  // useEffect(() => {\r\n  //   const socket = io(\"http://localhost:5000\");\r\n\r\n  //   socket.emit(\"message\", \"Bilal\");\r\n  //   socket.on(\"response\", (data) => {\r\n  //     console.log(\"Server Response:\", data);\r\n  //   });\r\n  //   return () => {\r\n  //     socket.disconnect();\r\n  //   };\r\n  // }, []);\r\n\r\n  const context = useContext(vividlyContext);\r\n  const {\r\n    handleCreateStoryWithMediaOnly,\r\n    handleCreateStoryTextAndMedia,\r\n    handleDelStory,\r\n    handleFollowedUserPosts,\r\n  } = context;\r\n\r\n  const id = localStorage.getItem(\"id\");\r\n  const parsedId = JSON.parse(id);\r\n\r\n  const [showPrevIcon, setShowPrevIcon] = useState(false);\r\n  const [showNextIcon, setShowNextIcon] = useState(true);\r\n  const storiesContainerRef = useRef(null);\r\n  const [userProfile, setUserProfile] = useState(\"\");\r\n\r\n  const [groupedStories, setGroupedStories] = useState([]);\r\n\r\n  const processStories = (stories) => {\r\n    const newGroupedStories = {};\r\n    stories.forEach((story) => {\r\n      if (!newGroupedStories[story.user._id]) {\r\n        newGroupedStories[story.user._id] = {\r\n          user: story.user,\r\n          stories: [],\r\n        };\r\n      }\r\n      newGroupedStories[story.user._id].stories.push(story);\r\n    });\r\n\r\n    setGroupedStories((prevStories) => {\r\n      const updatedStories = {\r\n        ...prevStories.reduce((acc, group) => {\r\n          acc[group.user._id] = group;\r\n          return acc;\r\n        }, {}),\r\n      };\r\n      Object.values(newGroupedStories).forEach((group) => {\r\n        if (!updatedStories[group.user._id]) {\r\n          updatedStories[group.user._id] = group;\r\n        } else {\r\n          const existingStoryIds = new Set(\r\n            updatedStories[group.user._id].stories.map((story) => story._id)\r\n          );\r\n          group.stories.forEach((story) => {\r\n            if (!existingStoryIds.has(story._id)) {\r\n              updatedStories[group.user._id].stories.push(story);\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      return Object.values(updatedStories);\r\n    });\r\n  };\r\n\r\n  const handleFetchFollowedUserStories = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const parsedToken = JSON.parse(token);\r\n      const response = await fetch(\r\n        `${ENDPOINT}/api/story/getFollowUserStories`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"auth-token\": parsedToken,\r\n          },\r\n        }\r\n      );\r\n      const data = await response.json();\r\n\r\n      if (\r\n        data.success &&\r\n        data.message !== \"No stories found for the users you're following.\"\r\n      ) {\r\n        processStories(data.stories);\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Error:\", error);\r\n    }\r\n  };\r\n\r\n  const handleFetchUserStories = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const parsedToken = JSON.parse(token);\r\n      const response = await fetch(`${ENDPOINT}/api/story/getUStories`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"auth-token\": parsedToken,\r\n        },\r\n      });\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        processStories(data.stories);\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Error:\", error.message);\r\n    }\r\n  };\r\n\r\n  const handlefetchUserProfile = async () => {\r\n    const id = localStorage.getItem(\"id\");\r\n    const parsedId = JSON.parse(id);\r\n    const token = localStorage.getItem(\"token\");\r\n    const parsedToken = JSON.parse(token);\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `${ENDPOINT}/api/user/getUserProfile/${parsedId}`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"auth-token\": parsedToken,\r\n          },\r\n        }\r\n      );\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setUserProfile(data);\r\n      } else {\r\n        console.log(\"Error\");\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Error:\", error.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    handlefetchUserProfile();\r\n    handleFetchFollowedUserStories();\r\n    handleFetchUserStories();\r\n    handleFollowedUserPostDetails();\r\n  }, []);\r\n\r\n  const ENDPOINT = process.env.REACT_APP_ENDPOINT;\r\n\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      if (storiesContainerRef.current) {\r\n        const { scrollLeft, scrollWidth, clientWidth } =\r\n          storiesContainerRef.current;\r\n\r\n        // Show \"prev\" icon if scrollLeft > 0\r\n        setShowPrevIcon(scrollLeft > 0);\r\n\r\n        // Show \"next\" icon if there's more content to scroll\r\n        setShowNextIcon(scrollLeft + clientWidth < scrollWidth - 1);\r\n      }\r\n    };\r\n\r\n    // Attach scroll event listener\r\n    const container = storiesContainerRef.current;\r\n    container.addEventListener(\"scroll\", handleScroll);\r\n\r\n    // Initial state update\r\n    handleScroll();\r\n\r\n    return () => {\r\n      // Cleanup event listener\r\n      container.removeEventListener(\"scroll\", handleScroll);\r\n    };\r\n  }, []);\r\n\r\n  const [mediaPreview, setMediaPreview] = useState(null);\r\n  const [storyMediaPreview, setStoryMediaPreview] = useState(null);\r\n\r\n  const [mediaFile, setMediaFile] = useState(null);\r\n  const [storyMediaFile, setStoryMediaFile] = useState(null);\r\n  const [media, setMedia] = useState(\"\");\r\n  const [caption, setCaption] = useState(\"\");\r\n  const [storyCaption, setStoryCaption] = useState(\"\");\r\n  const [selectedStory, setSelectedStory] = useState(null);\r\n  const [currentStoryIndex, setCurrentStoryIndex] = useState(0);\r\n\r\n  const handleMediaChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) {\r\n      return console.log(\"Please upload a file!\");\r\n    }\r\n\r\n    const formdata = new FormData();\r\n    formdata.append(\"media\", file);\r\n\r\n    try {\r\n      const data = await fetch(`${ENDPOINT}/api/post/media`, {\r\n        method: \"POST\",\r\n        body: formdata,\r\n      });\r\n      const response = await data.json();\r\n      if (response.success) {\r\n        setMedia(response.url);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n    setMediaPreview(URL.createObjectURL(file));\r\n    setMediaFile(file);\r\n  };\r\n\r\n  const handleStoryChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) {\r\n      return console.log(\"Please upload a file!\");\r\n    }\r\n\r\n    const formdata = new FormData();\r\n    formdata.append(\"media\", file);\r\n\r\n    try {\r\n      const data = await fetch(`${ENDPOINT}/api/post/media`, {\r\n        method: \"POST\",\r\n        body: formdata,\r\n      });\r\n      const response = await data.json();\r\n      if (response.success) {\r\n        setMedia(response.url);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n    setStoryMediaPreview(URL.createObjectURL(file));\r\n    setStoryMediaFile(file);\r\n  };\r\n\r\n  const handleCaptionChange = (e) => {\r\n    setCaption(e.target.value);\r\n  };\r\n\r\n  const handleStoryCaptionChange = (e) => {\r\n    setStoryCaption(e.target.value);\r\n  };\r\n\r\n  const handleCreatePost = async () => {\r\n    try {\r\n      const mediaType = mediaFile.type.startsWith(\"video/\") ? \"video\" : \"image\";\r\n      const token = localStorage.getItem(\"token\");\r\n      const parsedToken = JSON.parse(token);\r\n      const response = await fetch(`${ENDPOINT}/api/post/createPost`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"auth-token\": parsedToken,\r\n        },\r\n        body: JSON.stringify({\r\n          description: caption,\r\n          media: media,\r\n          mediaType: mediaType,\r\n        }),\r\n      });\r\n      const data = await response.json();\r\n      setMediaFile(null);\r\n      setMediaPreview(\"\");\r\n      setCaption(\"\");\r\n      // setUserPost([...userPost, data]);\r\n      // await handleFetchUserPosts();\r\n    } catch (error) {\r\n      console.log(\"Error:\", error.message);\r\n    }\r\n  };\r\n  const handleCreateStory = async () => {\r\n    try {\r\n      if (storyMediaFile && storyCaption) {\r\n        const response = await handleCreateStoryTextAndMedia(\r\n          media,\r\n          storyCaption\r\n        );\r\n        if (response.success) {\r\n          setStoryMediaFile(null);\r\n          setStoryMediaPreview(\"\");\r\n          setStoryCaption(\"\");\r\n        }\r\n      } else if (storyMediaFile) {\r\n        const response = await handleCreateStoryWithMediaOnly(media);\r\n        if (response.success) {\r\n          setStoryMediaFile(null);\r\n          setStoryMediaPreview(\"\");\r\n          setStoryCaption(\"\");\r\n        }\r\n      }\r\n      await handleFetchUserStories();\r\n\r\n      // setUserPost([...userPost, data]);\r\n      // await handleFetchUserPosts();\r\n    } catch (error) {\r\n      console.log(\"Error:\", error);\r\n    }\r\n  };\r\n\r\n  const handleStoryClick = (stories) => {\r\n    setSelectedStory(stories);\r\n  };\r\n\r\n  const handleDeleteStory = async (storyId) => {\r\n    const response = await handleDelStory(storyId);\r\n\r\n    if (response.success) {\r\n      if (selectedStory.stories.length > 1) {\r\n        setSelectedStory({\r\n          ...selectedStory,\r\n          stories: selectedStory.stories.filter((s) => s._id !== storyId),\r\n        });\r\n      } else {\r\n        setSelectedStory(null);\r\n        setGroupedStories(\r\n          groupedStories.filter((s) => s.user._id !== parsedId)\r\n        );\r\n      }\r\n    }\r\n  };\r\n  const handleFetchPostLikes = async (postId) => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const parsedToken = JSON.parse(token);\r\n      const response = await fetch(\r\n        `${ENDPOINT}/api/post/fetchPostLikes/${postId}`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"auth-token\": parsedToken,\r\n          },\r\n        }\r\n      );\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        return data.postLikes.likes;\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Error:\", error.message);\r\n    }\r\n  };\r\n  const handleLikePost = async (postId) => {\r\n    const token = localStorage.getItem(\"token\");\r\n    const parsedToken = JSON.parse(token);\r\n    const data = await fetch(`${ENDPOINT}/api/post/likePost/${postId}`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"auth-token\": parsedToken,\r\n      },\r\n    });\r\n    const response = await data.json();\r\n    const userId = localStorage.getItem(\"id\");\r\n    const parsedUserId = JSON.parse(userId);\r\n\r\n    const post = fUserPostDetails.find((post) => post._id === postId);\r\n    if (post) {\r\n      const userAlreadyLiked = post.likes.some(\r\n        (like) => like.user === parsedUserId\r\n      );\r\n\r\n      if (userAlreadyLiked) {\r\n        setFUserPostDetails(\r\n          fUserPostDetails.map((p) =>\r\n            p._id === postId\r\n              ? {\r\n                  ...p,\r\n                  likes: p.likes.filter((like) => like.user !== parsedUserId),\r\n                  likeStatus: \"Not Liked\",\r\n                }\r\n              : p\r\n          )\r\n        );\r\n      } else {\r\n        setFUserPostDetails(\r\n          fUserPostDetails.map((p) =>\r\n            p._id === postId\r\n              ? {\r\n                  ...p,\r\n                  likes: [...p.likes, { user: parsedUserId }],\r\n                  likeStatus: \"Liked\",\r\n                }\r\n              : p\r\n          )\r\n        );\r\n      }\r\n    }\r\n\r\n    return response;\r\n  };\r\n\r\n  const handleFetchPostComments = async (postId) => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const parsedToken = JSON.parse(token);\r\n      const response = await fetch(\r\n        `${ENDPOINT}/api/post/fetchPostComments/${postId}`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"auth-token\": parsedToken,\r\n          },\r\n        }\r\n      );\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        return data.postComments.comments; // Return the likes for a given post\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Error:\", error.message);\r\n    }\r\n  };\r\n  const [fUserPostDetails, setFUserPostDetails] = useState([]);\r\n\r\n  const handleFollowedUserPostDetails = async () => {\r\n    const posts = await handleFollowedUserPosts();\r\n    const postsWithDetails = await Promise.all(\r\n      posts.map(async (post) => {\r\n        const likes = await handleFetchPostLikes(post._id);\r\n        const comments = await handleFetchPostComments(post._id);\r\n        let likeStatus = likes.some((like) => like.user === parsedId)\r\n          ? \"Liked\"\r\n          : \"Not Liked\";\r\n\r\n        return { ...post, likes, comments, likeStatus };\r\n      })\r\n    );\r\n    setFUserPostDetails(postsWithDetails);\r\n  };\r\n\r\n  const [specificPostComments, setSpecificPostComments] = useState([]);\r\n  const handleSpecificPostComments = (id) => {\r\n    const post = fUserPostDetails.find((post) => post._id === id);\r\n    setSpecificPostComments(post.comments);\r\n  };\r\n  const [cText, setCText] = useState(\"\");\r\n  const handleCommentOnChange = (e) => {\r\n    setCText(e.target.value);\r\n  };\r\n  const handleAddComment = async (postId, text, event) => {\r\n    const token = localStorage.getItem(\"token\");\r\n    const parsedToken = JSON.parse(token);\r\n\r\n    if (event.key === \"Enter\" || event.key === \"enter\") {\r\n      setCText(\"\");\r\n      try {\r\n        const response = await fetch(\r\n          `${ENDPOINT}/api/post/commentOnPost/${postId}`,\r\n          {\r\n            method: \"PUT\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n              \"auth-token\": parsedToken,\r\n            },\r\n            body: JSON.stringify({\r\n              text,\r\n            }),\r\n          }\r\n        );\r\n        const data = await response.json();\r\n        if (data.success) {\r\n          setSpecificPostComments(data.updatedComment.comments);\r\n          setFUserPostDetails(\r\n            fUserPostDetails.map((p) =>\r\n              p._id === postId\r\n                ? {\r\n                    ...p,\r\n                    comments: data.updatedComment.comments,\r\n                  }\r\n                : p\r\n            )\r\n          );\r\n        }\r\n      } catch (error) {\r\n        console.log(\"Error:\", error.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  const [specificPostId, setSpecificPosId] = useState(\"\");\r\n\r\n  const handleStoreSpecificPostId = (id) => {\r\n    setSpecificPosId(id);\r\n  };\r\n\r\n  function timeAgo(date) {\r\n    const now = new Date();\r\n    const diffInSeconds = Math.floor((now - new Date(date)) / 1000);\r\n\r\n    if (diffInSeconds < 60) {\r\n      return `${diffInSeconds} seconds ago`;\r\n    }\r\n\r\n    const diffInMinutes = Math.floor(diffInSeconds / 60);\r\n    if (diffInMinutes < 60) {\r\n      return `${diffInMinutes} minute${diffInMinutes > 1 ? \"s\" : \"\"} ago`;\r\n    }\r\n\r\n    const diffInHours = Math.floor(diffInMinutes / 60);\r\n    if (diffInHours < 24) {\r\n      return `${diffInHours} hour${diffInHours > 1 ? \"s\" : \"\"} ago`;\r\n    }\r\n\r\n    const diffInDays = Math.floor(diffInHours / 24);\r\n    if (diffInDays < 30) {\r\n      return `${diffInDays} day${diffInDays > 1 ? \"s\" : \"\"} ago`;\r\n    }\r\n\r\n    const diffInMonths = Math.floor(diffInDays / 30);\r\n    if (diffInMonths < 12) {\r\n      return `${diffInMonths} month${diffInMonths > 1 ? \"s\" : \"\"} ago`;\r\n    }\r\n\r\n    const diffInYears = Math.floor(diffInMonths / 12);\r\n    return `${diffInYears} year${diffInYears > 1 ? \"s\" : \"\"} ago`;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Main Content Section */}\r\n\r\n      <div className=\"flex min-h-screen sm:pl-72 sm:pt-24 max-w-7xl mx-auto sm:p-4\">\r\n        {/* Feed Section */}\r\n\r\n        {console.log(fUserPostDetails)}\r\n\r\n        <div className=\"w-full bg-white p-4 rounded-lg shadow-lg\">\r\n          {/* Stories/Highlights */}\r\n          {/* Stories Section with Scroll Indicator */}\r\n          <div className=\"relative mb-6\">\r\n            <div\r\n              ref={storiesContainerRef}\r\n              className=\"flex space-x-4 overflow-x-auto scrollbar-hide whitespace-nowrap mb-4 py-2\"\r\n            >\r\n              {/* Story Upload Section */}\r\n              <div className=\"flex-shrink-0 w-24 h-24 bg-gray-300 rounded-full cursor-pointer relative\">\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"image/*,video/*\"\r\n                  onChange={handleStoryChange}\r\n                  className=\"absolute inset-0 opacity-0 cursor-pointer\"\r\n                />\r\n                <div className=\"flex items-center justify-center h-full text-gray-700\">\r\n                  <span className=\"text-xl font-bold\">+</span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Other Story Items */}\r\n              {groupedStories &&\r\n                groupedStories.map((story) => {\r\n                  return (\r\n                    <div\r\n                      key={story.user._id}\r\n                      className=\"flex-shrink-0 w-24 h-24 bg-gray-300 rounded-full cursor-pointer\"\r\n                      onClick={() => handleStoryClick(story)} // On click, display the stories\r\n                    >\r\n                      <img\r\n                        src={story.user.picture}\r\n                        alt=\"Failed to load profile img\"\r\n                        className=\"w-full h-full rounded-full object-cover border-2 border-transparent \r\n                  bg-gradient-to-r from-pink-600 via-yellow-500 to-pink-600 p-[2px] shadow-lg\"\r\n                      />\r\n                    </div>\r\n                  );\r\n                })}\r\n            </div>\r\n          </div>\r\n\r\n          {selectedStory && (\r\n            <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\">\r\n              <div className=\"relative max-w-3xl w-[90%] md:w-full bg-white p-4 rounded-lg shadow-2xl overflow-hidden\">\r\n                {/* Close Button */}\r\n                <button\r\n                  onClick={() => {\r\n                    setSelectedStory(null);\r\n                    setCurrentStoryIndex(0);\r\n                  }}\r\n                  className=\"absolute top-4 right-4 text-white text-2xl bg-black bg-opacity-50 px-5 py-1 rounded-lg hover:bg-opacity-75 transition\"\r\n                >\r\n                  &times;\r\n                </button>\r\n\r\n                {/* User Info and Delete Button */}\r\n                <div className=\"flex items-center justify-between mb-4 hover:cursor-pointer relative mt-12\">\r\n                  {/* User Info */}\r\n                  <div className=\"flex items-center\">\r\n                    <img\r\n                      src={selectedStory.user.picture}\r\n                      alt=\"Failed to load img\"\r\n                      className=\"rounded-full h-14 w-14 mr-3\"\r\n                    />\r\n                    <div>\r\n                      <h2 className=\"text-lg font-semibold text-black\">\r\n                        {selectedStory.user.fullName}\r\n                      </h2>\r\n                      <p className=\"text-base text-gray-600\">\r\n                        @{selectedStory.user.userName}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Delete Button with Font Awesome Icon */}\r\n                  {selectedStory.user._id === parsedId && (\r\n                    <button\r\n                      onClick={() =>\r\n                        handleDeleteStory(\r\n                          selectedStory.stories[currentStoryIndex]._id\r\n                        )\r\n                      }\r\n                      className=\"relative flex items-center justify-center text-white text-2xl ml-4 p-3 rounded-full transition-all duration-300 transform hover:scale-105 hover:shadow-lg\"\r\n                      title=\"Delete Story\"\r\n                      style={{\r\n                        background: \"linear-gradient(135deg, #ff416c, #ff4b2b)\",\r\n                        boxShadow: \"0 4px 15px rgba(255, 75, 43, 0.5)\",\r\n                      }}\r\n                    >\r\n                      <FontAwesomeIcon icon={faTrashAlt} />\r\n                    </button>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Story Content with Date and Navigation */}\r\n                <div className=\"flex flex-col items-center justify-center relative\">\r\n                  <div className=\"relative w-full max-w-3xl h-[70vh] bg-black rounded-lg overflow-hidden shadow-lg\">\r\n                    {/* Story Media */}\r\n                    {selectedStory.stories[currentStoryIndex].imageUrl.endsWith(\r\n                      \".mp4\"\r\n                    ) ? (\r\n                      <video\r\n                        src={selectedStory.stories[currentStoryIndex].imageUrl}\r\n                        controls\r\n                        autoPlay\r\n                        className=\"w-full h-full object-contain rounded-lg\"\r\n                      />\r\n                    ) : (\r\n                      <img\r\n                        src={selectedStory.stories[currentStoryIndex].imageUrl}\r\n                        alt=\"Failed to load story\"\r\n                        className=\"w-full h-full object-contain rounded-lg\"\r\n                      />\r\n                    )}\r\n\r\n                    {/* Story Caption */}\r\n                    {selectedStory.stories[currentStoryIndex].text && (\r\n                      <p className=\"absolute bottom-14 left-4 text-white text-base font-semibold shadow-md max-w-[90%] bg-black bg-opacity-50 p-2 rounded-lg\">\r\n                        Caption: {selectedStory.stories[currentStoryIndex].text}\r\n                      </p>\r\n                    )}\r\n\r\n                    {/* Story Date */}\r\n                    <p className=\"absolute top-4 left-4 text-sm text-white bg-black bg-opacity-50 px-2 py-1 rounded-lg\">\r\n                      {new Date(\r\n                        selectedStory.stories[currentStoryIndex].createdAt\r\n                      ).toLocaleDateString(\"en-GB\", {\r\n                        day: \"2-digit\",\r\n                        month: \"long\",\r\n                        year: \"numeric\",\r\n                      })}\r\n                    </p>\r\n\r\n                    {/* Left Arrow (Previous Story) */}\r\n                    {currentStoryIndex > 0 && (\r\n                      <button\r\n                        onClick={() =>\r\n                          setCurrentStoryIndex(currentStoryIndex - 1)\r\n                        }\r\n                        className=\"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white text-3xl p-2 rounded-full hover:bg-opacity-75\"\r\n                      >\r\n                        &#9664;\r\n                      </button>\r\n                    )}\r\n\r\n                    {/* Right Arrow (Next Story) */}\r\n                    {currentStoryIndex < selectedStory.stories.length - 1 && (\r\n                      <button\r\n                        onClick={() =>\r\n                          setCurrentStoryIndex(currentStoryIndex + 1)\r\n                        }\r\n                        className=\"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white text-3xl p-2 rounded-full hover:bg-opacity-75\"\r\n                      >\r\n                        &#9654;\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"p-6 bg-white rounded-lg shadow-lg mt-2 mb-5\">\r\n            {/* Story Media Preview Section */}\r\n            {storyMediaPreview && (\r\n              <div className=\"mt-4\">\r\n                {storyMediaFile.type.startsWith(\"video/\") ? (\r\n                  <video\r\n                    src={storyMediaPreview}\r\n                    controls\r\n                    className=\"w-full h-auto rounded-lg\"\r\n                  />\r\n                ) : (\r\n                  <img\r\n                    src={storyMediaPreview}\r\n                    alt=\"Media Preview\"\r\n                    className=\"w-full h-auto rounded-lg\"\r\n                  />\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Story Text Caption */}\r\n            {storyMediaPreview && (\r\n              <textarea\r\n                className=\"mt-4 w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none text-black\"\r\n                placeholder=\"Write a caption...\"\r\n                value={storyCaption}\r\n                onChange={handleStoryCaptionChange}\r\n              />\r\n            )}\r\n\r\n            {/*Story Action Buttons */}\r\n            <div className=\"flex justify-end mt-4 space-x-3\">\r\n              {storyMediaFile && (\r\n                <>\r\n                  <button\r\n                    className=\"py-2 px-6 bg-gray-200 text-black rounded-lg hover:bg-gray-300\"\r\n                    onClick={() => {\r\n                      setStoryMediaFile(null);\r\n                      setStoryMediaPreview(\"\");\r\n                      setStoryCaption(\"\");\r\n                    }}\r\n                    disabled={!storyMediaFile}\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    className={`py-2 px-6 rounded-lg text-white ${\r\n                      storyMediaFile\r\n                        ? \"bg-blue-600 hover:bg-blue-700\"\r\n                        : \"bg-gray-400 cursor-not-allowed\"\r\n                    }`}\r\n                    onClick={handleCreateStory}\r\n                    disabled={!storyMediaFile}\r\n                  >\r\n                    Upload Story\r\n                  </button>\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            {/* Upload Section */}\r\n            {!storyMediaFile && (\r\n              <label\r\n                htmlFor=\"mediaUpload\"\r\n                className=\"cursor-pointer flex flex-col items-center justify-center border-2 border-dashed border-gray-300 p-6 rounded-lg hover:border-blue-500 transition\"\r\n              >\r\n                {mediaPreview ? (\r\n                  <p className=\"text-blue-500 font-semibold\">Change Media</p>\r\n                ) : (\r\n                  <>\r\n                    <svg\r\n                      className=\"w-12 h-12 text-gray-500\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                      <path d=\"M12 4v16m8-8H4\"></path>\r\n                    </svg>\r\n                    <p className=\"text-gray-600 mt-2 text-center\">\r\n                      Click to upload an image or video\r\n                    </p>\r\n                  </>\r\n                )}\r\n                <input\r\n                  type=\"file\"\r\n                  id=\"mediaUpload\"\r\n                  className=\"hidden\"\r\n                  accept=\"image/*, video/*\"\r\n                  onChange={handleMediaChange}\r\n                />\r\n              </label>\r\n            )}\r\n\r\n            {/* Media Preview Section */}\r\n            {mediaPreview && (\r\n              <div className=\"mt-4\">\r\n                {mediaFile.type.startsWith(\"video/\") ? (\r\n                  <video\r\n                    src={mediaPreview}\r\n                    controls\r\n                    className=\"w-full h-auto rounded-lg\"\r\n                  />\r\n                ) : (\r\n                  <img\r\n                    src={mediaPreview}\r\n                    alt=\"Media Preview\"\r\n                    className=\"w-full h-auto rounded-lg\"\r\n                  />\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Text Caption */}\r\n            {mediaPreview && (\r\n              <textarea\r\n                className=\"mt-4 w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none text-black\"\r\n                placeholder=\"Write a caption...\"\r\n                value={caption}\r\n                onChange={handleCaptionChange}\r\n              />\r\n            )}\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"flex justify-end mt-4 space-x-3\">\r\n              {mediaFile && (\r\n                <>\r\n                  <button\r\n                    className=\"py-2 px-6 bg-gray-200 text-black rounded-lg hover:bg-gray-300\"\r\n                    onClick={() => {\r\n                      setMediaFile(null);\r\n                      setMediaPreview(\"\");\r\n                      setCaption(\"\");\r\n                    }}\r\n                    disabled={!mediaFile}\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    className={`py-2 px-6 rounded-lg text-white ${\r\n                      mediaFile && caption\r\n                        ? \"bg-blue-600 hover:bg-blue-700\"\r\n                        : \"bg-gray-400 cursor-not-allowed\"\r\n                    }`}\r\n                    onClick={handleCreatePost}\r\n                    disabled={!mediaFile || !caption}\r\n                  >\r\n                    Create Post\r\n                  </button>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <dialog id=\"addComment_Modal\" className=\"modal\">\r\n            <div className=\"modal-box min-h-[80vh] overflow-hidden bg-white rounded-lg shadow-lg relative\">\r\n              <form method=\"dialog\">\r\n                <button className=\"btn btn-sm btn-circle btn-ghost absolute right-4 top-4 text-black hover:bg-opacity-70 transition\">\r\n                  \r\n                </button>\r\n              </form>\r\n\r\n              <div className=\"flex justify-center mb-5\">\r\n                <h1 className=\"cus-font text-black font-semibold text-4xl mb-4\">\r\n                  Add a comment\r\n                </h1>\r\n              </div>\r\n\r\n              <div className=\"space-y-3 overflow-y-auto max-h-[60vh] pr-2 mb-[80px]\">\r\n                {specificPostComments.length > 0 ? (\r\n                  specificPostComments.map((cData) => (\r\n                    <div\r\n                      key={cData._id}\r\n                      className=\"flex bg-gray-100 rounded-xl p-2 shadow-md border border-gray-300 hover:bg-gray-200 transition\"\r\n                    >\r\n                      <img\r\n                        src={cData.userPic}\r\n                        alt=\"Failed to load user img\"\r\n                        className=\"rounded-full h-16 w-16 border-2 border-gray-400\"\r\n                      />\r\n                      <div className=\"flex flex-col ml-4\">\r\n                        <p className=\"font-semibold text-black\">\r\n                          {cData.userName}\r\n                        </p>\r\n                        <p className=\"text-gray-700\">{cData.text}</p>\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                ) : (\r\n                  <div className=\"flex justify-center items-center h-[55vh] custom-font text-2xl sm:text-3xl text-gray-600\">\r\n                    No Comments Here\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Fixed position input */}\r\n              <div className=\"absolute bottom-5 left-0 w-full px-4\">\r\n                <input\r\n                  className=\"w-full rounded-full bg-gray-100 focus:ring-1  focus:ring-blue-500 py-2 px-4 text-black shadow-md focus:outline-none transition\"\r\n                  type=\"text\"\r\n                  placeholder=\"Add a comment\"\r\n                  value={cText}\r\n                  onChange={handleCommentOnChange}\r\n                  onKeyDown={(event) =>\r\n                    handleAddComment(specificPostId, cText, event)\r\n                  }\r\n                />\r\n              </div>\r\n            </div>\r\n          </dialog>\r\n\r\n          <div className=\"max-w-8xl mx-auto py-10\">\r\n            {fUserPostDetails.map((post) => (\r\n              <div\r\n                className=\"bg-white rounded-lg shadow-lg p-6 mb-6 border border-gray-200 hover:shadow-xl transition-all duration-300\"\r\n                key={post._id}\r\n              >\r\n                <div className=\"flex items-center mb-4 hover:cursor-pointer bg-gray-50 p-2 rounded-2xl\">\r\n                  <div className=\"w-14 h-14\">\r\n                    <img\r\n                      src={post.userId.picture || Avatar}\r\n                      className=\"h-14 mb-4 w-14 rounded-full shadow-md\"\r\n                      alt=\"Failed to load img\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"ml-4\">\r\n                    <h2 className=\"text-lg font-semibold text-gray-800\">\r\n                      {post.userId.userName}\r\n                    </h2>\r\n                    <p className=\"text-sm text-gray-500\">\r\n                      {timeAgo(post.createdAt)}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                {post.media && (\r\n                  <div className=\"mb-4\">\r\n                    {post.media.endsWith(\".mp4\") ? (\r\n                      <video\r\n                        src={post.media}\r\n                        controls\r\n                        className=\"w-full rounded-lg\"\r\n                      />\r\n                    ) : (\r\n                      <img\r\n                        src={post.media}\r\n                        alt=\"Post Media\"\r\n                        className=\"w-full rounded-lg\"\r\n                      />\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                <p className=\"text-gray-800 text-base font-semibold leading-relaxed mb-3 p-1 bg-white rounded-lg transition-all duration-300\">\r\n                  {post.description}\r\n                </p>\r\n\r\n                <div className=\"flex items-center pl-1 space-x-6 text-gray-600\">\r\n                  <div className=\"flex items-center space-x-4\">\r\n                    <FontAwesomeIcon\r\n                      icon={post.likeStatus === \"Liked\" ? LikeHeart : faHeart}\r\n                      className={`text-2xl cursor-pointer ${\r\n                        post.likeStatus === \"Liked\"\r\n                          ? \"text-red-600\"\r\n                          : \"text-gray-600\"\r\n                      } hover:scale-110 transition-transform`}\r\n                      onClick={() => handleLikePost(post._id)}\r\n                    />\r\n\r\n                    <span className=\"text-lg text-gray-700\">\r\n                      {post.likes?.length}\r\n                    </span>\r\n\r\n                    <FontAwesomeIcon\r\n                      icon={faComment}\r\n                      className=\"text-2xl cursor-pointer text-gray-600 hover:text-blue-500\"\r\n                      onClick={() => {\r\n                        handleSpecificPostComments(post._id);\r\n                        handleStoreSpecificPostId(post._id);\r\n                        document.getElementById(\"addComment_Modal\").showModal();\r\n                      }}\r\n                    />\r\n                    <span className=\"text-lg text-gray-700\">\r\n                      {post.comments?.length}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {/* Share Button */}\r\n                  <FontAwesomeIcon\r\n                    icon={faPaperPlane}\r\n                    className=\"text-2xl cursor-pointer text-gray-600 hover:text-blue-500\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\n// const FeedPost = ({\r\n//   postId,\r\n//   picture,\r\n//   userName,\r\n//   postTime,\r\n//   postContent,\r\n//   postMedia,\r\n//   likeStatus,\r\n//   countLikes,\r\n//   countComments,\r\n// }) => {\r\n//   const formattedTime = timeAgo(postTime); // Convert the post time to a human-readable format\r\n\r\n//   return (\r\n//     <div className=\"bg-white rounded-lg shadow-lg p-6 mb-6 border border-gray-200 hover:shadow-xl transition-all duration-300\">\r\n//       <div className=\"flex items-center mb-4 hover:cursor-pointer bg-gray-50 p-2 rounded-2xl\">\r\n//         <div className=\"w-14 h-14\">\r\n//           <img\r\n//             src={picture || Avatar}\r\n//             className=\"h-14 mb-4 w-14 rounded-full shadow-md\"\r\n//             alt=\"Failed to load img\"\r\n//           />\r\n//         </div>\r\n\r\n//         <div className=\"ml-4\">\r\n//           <h2 className=\"text-lg font-semibold text-gray-800\">{userName}</h2>\r\n//           <p className=\"text-sm text-gray-500\">{formattedTime}</p>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {postMedia && (\r\n//         <div className=\"mb-4\">\r\n//           {postMedia.endsWith(\".mp4\") ? (\r\n//             <video src={postMedia} controls className=\"w-full rounded-lg\" />\r\n//           ) : (\r\n//             <img\r\n//               src={postMedia}\r\n//               alt=\"Post Media\"\r\n//               className=\"w-full rounded-lg\"\r\n//             />\r\n//           )}\r\n//         </div>\r\n//       )}\r\n\r\n//       <p className=\"text-gray-800 text-base font-semibold leading-relaxed mb-3 p-1 bg-white rounded-lg transition-all duration-300\">\r\n//         {postContent}\r\n//       </p>\r\n\r\n//       <div className=\"flex items-center pl-1 space-x-6 text-gray-600\">\r\n//         <div className=\"flex items-center space-x-4\">\r\n//           <FontAwesomeIcon\r\n//             icon={likeStatus === \"Liked\" ? LikeHeart : faHeart}\r\n//             className={`text-2xl cursor-pointer ${\r\n//               likeStatus === \"Liked\" ? \"text-red-600\" : \"text-gray-600\"\r\n//             } hover:scale-110 transition-transform`}\r\n//             onClick={() => handleLikePost(postId)}\r\n//           />\r\n\r\n//           <span className=\"text-lg text-gray-700\">{countLikes?.length}</span>\r\n\r\n//           <FontAwesomeIcon\r\n//             icon={faComment}\r\n//             className=\"text-2xl cursor-pointer text-gray-600 hover:text-blue-500\"\r\n//             onClick={() => {\r\n//               // handleSpecificPostComments(postId);\r\n//               // handleStoreSpecificPostId(postId);\r\n//               document.getElementById(\"addComment_Modal\").showModal();\r\n//             }}\r\n//           />\r\n//           <span className=\"text-lg text-gray-700\">{countComments?.length}</span>\r\n//         </div>\r\n\r\n//         {/* Share Button */}\r\n//         <FontAwesomeIcon\r\n//           icon={faPaperPlane}\r\n//           className=\"text-2xl cursor-pointer text-gray-600 hover:text-blue-500\"\r\n//         />\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}