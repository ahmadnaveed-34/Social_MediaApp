{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ahmad12\\\\Documents\\\\Vividly\\\\Frontend\\\\src\\\\Components\\\\OTPVerification.js\",\n  _s = $RefreshSig$();\nimport { useContext, useState } from \"react\";\nimport vividlyContext from \"../Context/vividlyContext\";\nimport Alert from \"./Alert\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst OTPVerification = ({\n  userInfo,\n  setStep,\n  setTimeLeft\n}) => {\n  _s();\n  const ENDPOINT = process.env.REACT_APP_ENDPOINT;\n  const [alert, setAlert] = useState(null);\n  const showAlert = (type, msg) => {\n    setAlert({\n      type: type,\n      msg: msg\n    });\n    setTimeout(() => {\n      setAlert(\"\");\n    }, 2000);\n  };\n  const context = useContext(vividlyContext);\n  const {\n    verifyOTP\n  } = context;\n  const [showerror, setShowError] = useState(false);\n  const [otp, setOtp] = useState([\"\", \"\", \"\", \"\", \"\", \"\"]);\n  const handleChange = (e, index) => {\n    const newOtp = [...otp];\n    newOtp[index] = e.target.value.slice(0, 1);\n    setOtp(newOtp);\n    if (e.target.value) {\n      const nextInput = document.getElementById(`otp-input-${index + 1}`);\n      if (nextInput) nextInput.focus();\n    }\n  };\n  const handleKeyDown = (e, index) => {\n    if (e.key === \"Backspace\" && otp[index] === \"\") {\n      const prevInput = document.getElementById(`otp-input-${index - 1}`);\n      if (prevInput) prevInput.focus();\n    }\n  };\n  const [loading, setLoading] = useState(false);\n  const handleVerifyOTP = async e => {\n    e.preventDefault();\n    const JoinOtp = otp.join(\"\");\n    if (JoinOtp.length < 6) {\n      setShowError(true);\n      return;\n    }\n    setLoading(true);\n    const response = await verifyOTP(userInfo.fullName, userInfo.userName, userInfo.email, userInfo.password, JoinOtp);\n    if (response.success) {\n      const themeResponse = await fetch(`${ENDPOINT}/api/user/userSetting/${response.id}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": response.token\n        }\n      });\n      const themeResponseData = await themeResponse.json();\n      setStep(3);\n      localStorage.setItem(\"id\", JSON.stringify(response.id));\n      localStorage.setItem(\"userName\", JSON.stringify(response.userName));\n      localStorage.setItem(\"token\", JSON.stringify(response.token));\n      setLoading(false);\n    } else {\n      showAlert(\"error\", \"Invalid or expired OTP!\");\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-[26px] mb-2\",\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        alert: alert\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex space-x-2\",\n      children: otp.map((digit, index) => /*#__PURE__*/_jsxDEV(\"input\", {\n        id: `otp-input-${index}`,\n        type: \"password\",\n        value: digit,\n        maxLength: \"1\",\n        required: true,\n        onChange: e => handleChange(e, index),\n        onKeyDown: e => handleKeyDown(e, index),\n        className: \"h-9 w-9 lmd:w-12 lmd:h-12 text-center border border-gray-300 rounded-md text-xl text-black\"\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-10 mt-2\",\n      children: showerror && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-500 text-sm\",\n        children: \"Please enter 6 digit OTP!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => {\n          setStep(1);\n          setTimeLeft(3600);\n        },\n        className: \"bg-gray-300 text-black font-medium py-2 px-6 rounded-lg hover:bg-gray-400 transition-all duration-300\",\n        children: \"\\u2190 Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        onClick: handleVerifyOTP,\n        className: \"bg-blue-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-blue-700 transition-all duration-300\",\n        disabled: loading,\n        children: loading ? \"Verifying...\" : \"Verify OTP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(OTPVerification, \"Jgegdanwbjf8fnuCQl2ACBtc8T4=\");\n_c = OTPVerification;\nexport default OTPVerification;\nvar _c;\n$RefreshReg$(_c, \"OTPVerification\");","map":{"version":3,"names":["useContext","useState","vividlyContext","Alert","jsxDEV","_jsxDEV","Fragment","_Fragment","OTPVerification","userInfo","setStep","setTimeLeft","_s","ENDPOINT","process","env","REACT_APP_ENDPOINT","alert","setAlert","showAlert","type","msg","setTimeout","context","verifyOTP","showerror","setShowError","otp","setOtp","handleChange","e","index","newOtp","target","value","slice","nextInput","document","getElementById","focus","handleKeyDown","key","prevInput","loading","setLoading","handleVerifyOTP","preventDefault","JoinOtp","join","length","response","fullName","userName","email","password","success","themeResponse","fetch","id","method","headers","token","themeResponseData","json","localStorage","setItem","JSON","stringify","children","className","fileName","_jsxFileName","lineNumber","columnNumber","map","digit","maxLength","required","onChange","onKeyDown","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Ahmad12/Documents/Vividly/Frontend/src/Components/OTPVerification.js"],"sourcesContent":["import { useContext, useState } from \"react\";\r\nimport vividlyContext from \"../Context/vividlyContext\";\r\nimport Alert from \"./Alert\";\r\n\r\nconst OTPVerification = ({ userInfo, setStep, setTimeLeft }) => {\r\n    const ENDPOINT = process.env.REACT_APP_ENDPOINT;\r\n  const [alert, setAlert] = useState(null);\r\n  const showAlert = (type, msg) => {\r\n    setAlert({\r\n      type: type,\r\n      msg: msg,\r\n    });\r\n    setTimeout(() => {\r\n      setAlert(\"\");\r\n    }, 2000);\r\n  };\r\n\r\n  const context = useContext(vividlyContext);\r\n  const { verifyOTP } = context;\r\n  const [showerror, setShowError] = useState(false);\r\n\r\n  const [otp, setOtp] = useState([\"\", \"\", \"\", \"\", \"\", \"\"]);\r\n\r\n  const handleChange = (e, index) => {\r\n    const newOtp = [...otp];\r\n    newOtp[index] = e.target.value.slice(0, 1);\r\n    setOtp(newOtp);\r\n\r\n    if (e.target.value) {\r\n      const nextInput = document.getElementById(`otp-input-${index + 1}`);\r\n      if (nextInput) nextInput.focus();\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e, index) => {\r\n    if (e.key === \"Backspace\" && otp[index] === \"\") {\r\n      const prevInput = document.getElementById(`otp-input-${index - 1}`);\r\n      if (prevInput) prevInput.focus();\r\n    }\r\n  };\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleVerifyOTP = async (e) => {\r\n    e.preventDefault();\r\n    const JoinOtp = otp.join(\"\");\r\n    if (JoinOtp.length < 6) {\r\n      setShowError(true);\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    const response = await verifyOTP(\r\n      userInfo.fullName,\r\n      userInfo.userName,\r\n      userInfo.email,\r\n      userInfo.password,\r\n      JoinOtp\r\n    );\r\n    if (response.success) {\r\n      const themeResponse = await fetch(\r\n        `${ENDPOINT}/api/user/userSetting/${response.id}`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"auth-token\": response.token,\r\n          },\r\n        }\r\n      );\r\n      const themeResponseData = await themeResponse.json();\r\n\r\n      setStep(3);\r\n      localStorage.setItem(\"id\", JSON.stringify(response.id));\r\n      localStorage.setItem(\"userName\", JSON.stringify(response.userName));\r\n      localStorage.setItem(\"token\", JSON.stringify(response.token));\r\n      setLoading(false);\r\n    } else {\r\n      showAlert(\"error\", \"Invalid or expired OTP!\");\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"h-[26px] mb-2\">\r\n        <Alert alert={alert} />\r\n      </div>\r\n      <div className=\"flex space-x-2\">\r\n        {otp.map((digit, index) => (\r\n          <input\r\n            key={index}\r\n            id={`otp-input-${index}`}\r\n            type=\"password\"\r\n            value={digit}\r\n            maxLength=\"1\"\r\n            required\r\n            onChange={(e) => handleChange(e, index)}\r\n            onKeyDown={(e) => handleKeyDown(e, index)}\r\n            className=\"h-9 w-9 lmd:w-12 lmd:h-12 text-center border border-gray-300 rounded-md text-xl text-black\"\r\n          />\r\n        ))}\r\n      </div>\r\n      <div className=\"h-10 mt-2\">\r\n        {showerror && (\r\n          <p className=\"text-red-500 text-sm\">Please enter 6 digit OTP!</p>\r\n        )}\r\n      </div>\r\n      <div className=\"flex justify-center gap-4\">\r\n        {/* Back Button */}\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => {\r\n            setStep(1);\r\n            setTimeLeft(3600);\r\n          }}\r\n          className=\"bg-gray-300 text-black font-medium py-2 px-6 rounded-lg hover:bg-gray-400 transition-all duration-300\"\r\n        >\r\n          ← Back\r\n        </button>\r\n\r\n        {/* Verify Button */}\r\n        <button\r\n          type=\"submit\"\r\n          onClick={handleVerifyOTP}\r\n          className=\"bg-blue-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-blue-700 transition-all duration-300\"\r\n          disabled={loading}\r\n        >\r\n          {loading ? \"Verifying...\" : \"Verify OTP\"}\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OTPVerification;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}