{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ahmad12\\\\Documents\\\\Vividly\\\\Frontend\\\\src\\\\Components\\\\Home.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useRef, useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport vividlyContext from \"../Context/vividlyContext\";\nimport Avatar from \"../Images/Avatar.jpeg\";\n// import { io } from \"socket.io-client\";\n\nimport { faShare } from \"@fortawesome/free-solid-svg-icons\";\nimport { faComment, faHeart as LikeHeart, faPaperPlane } from \"@fortawesome/free-regular-svg-icons\";\nimport { faTrashAlt, faHeart } from \"@fortawesome/free-regular-svg-icons\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  // useEffect(() => {\n  //   const socket = io(\"http://localhost:5000\");\n\n  //   socket.emit(\"message\", \"Bilal\");\n  //   socket.on(\"response\", (data) => {\n  //     console.log(\"Server Response:\", data);\n  //   });\n  //   return () => {\n  //     socket.disconnect();\n  //   };\n  // }, []);\n\n  const context = useContext(vividlyContext);\n  const {\n    handleCreateStoryWithMediaOnly,\n    handleCreateStoryTextAndMedia,\n    handleDelStory,\n    handleFollowedUserPosts\n  } = context;\n  const id = localStorage.getItem(\"id\");\n  const parsedId = JSON.parse(id);\n  const [showPrevIcon, setShowPrevIcon] = useState(false);\n  const [showNextIcon, setShowNextIcon] = useState(true);\n  const storiesContainerRef = useRef(null);\n  const [userProfile, setUserProfile] = useState(\"\");\n  const [groupedStories, setGroupedStories] = useState([]);\n  const processStories = stories => {\n    const newGroupedStories = {};\n    stories.forEach(story => {\n      if (!newGroupedStories[story.user._id]) {\n        newGroupedStories[story.user._id] = {\n          user: story.user,\n          stories: []\n        };\n      }\n      newGroupedStories[story.user._id].stories.push(story);\n    });\n    setGroupedStories(prevStories => {\n      const updatedStories = {\n        ...prevStories.reduce((acc, group) => {\n          acc[group.user._id] = group;\n          return acc;\n        }, {})\n      };\n      Object.values(newGroupedStories).forEach(group => {\n        if (!updatedStories[group.user._id]) {\n          updatedStories[group.user._id] = group;\n        } else {\n          const existingStoryIds = new Set(updatedStories[group.user._id].stories.map(story => story._id));\n          group.stories.forEach(story => {\n            if (!existingStoryIds.has(story._id)) {\n              updatedStories[group.user._id].stories.push(story);\n            }\n          });\n        }\n      });\n      return Object.values(updatedStories);\n    });\n  };\n  const handleFetchFollowedUserStories = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const parsedToken = JSON.parse(token);\n      const response = await fetch(`${ENDPOINT}/api/story/getFollowUserStories`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": parsedToken\n        }\n      });\n      const data = await response.json();\n      if (data.success && data.message !== \"No stories found for the users you're following.\") {\n        processStories(data.stories);\n      }\n    } catch (error) {\n      console.log(\"Error:\", error);\n    }\n  };\n  const handleFetchUserStories = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const parsedToken = JSON.parse(token);\n      const response = await fetch(`${ENDPOINT}/api/story/getUStories`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": parsedToken\n        }\n      });\n      const data = await response.json();\n      if (data.success) {\n        processStories(data.stories);\n      }\n    } catch (error) {\n      console.log(\"Error:\", error.message);\n    }\n  };\n  const handlefetchUserProfile = async () => {\n    const id = localStorage.getItem(\"id\");\n    const parsedId = JSON.parse(id);\n    const token = localStorage.getItem(\"token\");\n    const parsedToken = JSON.parse(token);\n    try {\n      const response = await fetch(`${ENDPOINT}/api/user/getUserProfile/${parsedId}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": parsedToken\n        }\n      });\n      const data = await response.json();\n      if (data.success) {\n        setUserProfile(data);\n      } else {\n        console.log(\"Error\");\n      }\n    } catch (error) {\n      console.log(\"Error:\", error.message);\n    }\n  };\n  useEffect(() => {\n    handlefetchUserProfile();\n    handleFetchFollowedUserStories();\n    handleFetchUserStories();\n    handleFollowedUserPostDetails();\n  }, []);\n  const ENDPOINT = process.env.REACT_APP_ENDPOINT;\n  useEffect(() => {\n    const handleScroll = () => {\n      if (storiesContainerRef.current) {\n        const {\n          scrollLeft,\n          scrollWidth,\n          clientWidth\n        } = storiesContainerRef.current;\n\n        // Show \"prev\" icon if scrollLeft > 0\n        setShowPrevIcon(scrollLeft > 0);\n\n        // Show \"next\" icon if there's more content to scroll\n        setShowNextIcon(scrollLeft + clientWidth < scrollWidth - 1);\n      }\n    };\n\n    // Attach scroll event listener\n    const container = storiesContainerRef.current;\n    container.addEventListener(\"scroll\", handleScroll);\n\n    // Initial state update\n    handleScroll();\n    return () => {\n      // Cleanup event listener\n      container.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, []);\n  const [mediaPreview, setMediaPreview] = useState(null);\n  const [storyMediaPreview, setStoryMediaPreview] = useState(null);\n\n  // const handlePost = () => {};\n\n  const [mediaFile, setMediaFile] = useState(null);\n  const [storyMediaFile, setStoryMediaFile] = useState(null);\n  const [media, setMedia] = useState(\"\");\n  const [caption, setCaption] = useState(\"\");\n  const [storyCaption, setStoryCaption] = useState(\"\");\n  const [selectedStory, setSelectedStory] = useState(null);\n  const [currentStoryIndex, setCurrentStoryIndex] = useState(0);\n  const handleMediaChange = async e => {\n    const file = e.target.files[0];\n    if (!file) {\n      return console.log(\"Please upload a file!\");\n    }\n    const formdata = new FormData();\n    formdata.append(\"media\", file);\n    try {\n      const data = await fetch(`${ENDPOINT}/api/post/media`, {\n        method: \"POST\",\n        body: formdata\n      });\n      const response = await data.json();\n      if (response.success) {\n        setMedia(response.url);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n    setMediaPreview(URL.createObjectURL(file));\n    setMediaFile(file);\n  };\n  const handleStoryChange = async e => {\n    const file = e.target.files[0];\n    if (!file) {\n      return console.log(\"Please upload a file!\");\n    }\n    const formdata = new FormData();\n    formdata.append(\"media\", file);\n    try {\n      const data = await fetch(`${ENDPOINT}/api/post/media`, {\n        method: \"POST\",\n        body: formdata\n      });\n      const response = await data.json();\n      if (response.success) {\n        setMedia(response.url);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n    setStoryMediaPreview(URL.createObjectURL(file));\n    setStoryMediaFile(file);\n  };\n  const handleCaptionChange = e => {\n    setCaption(e.target.value);\n  };\n  const handleStoryCaptionChange = e => {\n    setStoryCaption(e.target.value);\n  };\n  const handleCreatePost = async () => {\n    try {\n      const mediaType = mediaFile.type.startsWith(\"video/\") ? \"video\" : \"image\";\n      const token = localStorage.getItem(\"token\");\n      const parsedToken = JSON.parse(token);\n      const response = await fetch(`${ENDPOINT}/api/post/createPost`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": parsedToken\n        },\n        body: JSON.stringify({\n          description: caption,\n          media: media,\n          mediaType: mediaType\n        })\n      });\n      const data = await response.json();\n      setMediaFile(null);\n      setMediaPreview(\"\");\n      setCaption(\"\");\n      // setUserPost([...userPost, data]);\n      // await handleFetchUserPosts();\n    } catch (error) {\n      console.log(\"Error:\", error.message);\n    }\n  };\n  const handleCreateStory = async () => {\n    try {\n      if (storyMediaFile && storyCaption) {\n        const response = await handleCreateStoryTextAndMedia(media, storyCaption);\n        if (response.success) {\n          setStoryMediaFile(null);\n          setStoryMediaPreview(\"\");\n          setStoryCaption(\"\");\n        }\n      } else if (storyMediaFile) {\n        const response = await handleCreateStoryWithMediaOnly(media);\n        if (response.success) {\n          setStoryMediaFile(null);\n          setStoryMediaPreview(\"\");\n          setStoryCaption(\"\");\n        }\n      }\n      await handleFetchUserStories();\n\n      // setUserPost([...userPost, data]);\n      // await handleFetchUserPosts();\n    } catch (error) {\n      console.log(\"Error:\", error);\n    }\n  };\n  const handleStoryClick = stories => {\n    setSelectedStory(stories);\n  };\n  const handleDeleteStory = async storyId => {\n    const response = await handleDelStory(storyId);\n    if (response.success) {\n      if (selectedStory.stories.length > 1) {\n        setSelectedStory({\n          ...selectedStory,\n          stories: selectedStory.stories.filter(s => s._id !== storyId)\n        });\n      } else {\n        setSelectedStory(null);\n        setGroupedStories(groupedStories.filter(s => s.user._id !== parsedId));\n      }\n    }\n  };\n  const handleFetchPostLikes = async postId => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const parsedToken = JSON.parse(token);\n      const response = await fetch(`${ENDPOINT}/api/post/fetchPostLikes/${postId}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": parsedToken\n        }\n      });\n      const data = await response.json();\n      if (data.success) {\n        return data.postLikes.likes;\n      }\n    } catch (error) {\n      console.log(\"Error:\", error.message);\n    }\n  };\n\n  // const handleLikePost = async (postId) => {\n  //   const token = localStorage.getItem(\"token\");\n  //   const parsedToken = JSON.parse(token);\n  //   const data = await fetch(`${ENDPOINT}/api/post/likePost/${postId}`, {\n  //     method: \"PUT\",\n  //     headers: {\n  //       \"Content-Type\": \"application/json\",\n  //       \"auth-token\": parsedToken,\n  //     },\n  //   });\n  //   const response = await data.json();\n  //   const userId = localStorage.getItem(\"id\");\n  //   const parsedUserId = JSON.parse(userId);\n\n  //   const post = userPost.find((post) => post._id === postId);\n  //   if (post) {\n  //     const userAlreadyLiked = post.likes.some(\n  //       (like) => like.user === parsedUserId\n  //     );\n\n  //     if (userAlreadyLiked) {\n  //       setUserPost(\n  //         userPost.map((p) =>\n  //           p._id === postId\n  //             ? {\n  //                 ...p,\n  //                 likes: p.likes.filter((like) => like.user !== parsedUserId),\n  //                 likeStatus: \"Not Liked\",\n  //               }\n  //             : p\n  //         )\n  //       );\n  //     } else {\n  //       setUserPost(\n  //         userPost.map((p) =>\n  //           p._id === postId\n  //             ? {\n  //                 ...p,\n  //                 likes: [...p.likes, { user: parsedUserId }],\n  //                 likeStatus: \"Liked\",\n  //               }\n  //             : p\n  //         )\n  //       );\n  //     }\n  //   }\n\n  //   return response;\n  // };\n\n  const handleFetchPostComments = async postId => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const parsedToken = JSON.parse(token);\n      const response = await fetch(`${ENDPOINT}/api/post/fetchPostComments/${postId}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": parsedToken\n        }\n      });\n      const data = await response.json();\n      if (data.success) {\n        return data.postComments.comments; // Return the likes for a given post\n      }\n    } catch (error) {\n      console.log(\"Error:\", error.message);\n    }\n  };\n  const [fUserPostDetails, setFUserPostDetails] = useState([]);\n  const handleFollowedUserPostDetails = async () => {\n    const posts = await handleFollowedUserPosts();\n    const postsWithDetails = await Promise.all(posts.map(async post => {\n      const likes = await handleFetchPostLikes(post._id);\n      const comments = await handleFetchPostComments(post._id);\n      let likeStatus = likes.some(like => like.user === parsedId) ? \"Liked\" : \"Not Liked\";\n      return {\n        ...post,\n        likes,\n        comments,\n        likeStatus\n      };\n    }));\n    setFUserPostDetails(postsWithDetails);\n  };\n  const handleLikePost = async postId => {\n    const token = localStorage.getItem(\"token\");\n    const parsedToken = JSON.parse(token);\n    const data = await fetch(`${ENDPOINT}/api/post/likePost/${postId}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"auth-token\": parsedToken\n      }\n    });\n    const response = await data.json();\n    const userId = localStorage.getItem(\"id\");\n    const parsedUserId = JSON.parse(userId);\n    const post = fUserPostDetails.find(post => post._id === postId);\n    if (post) {\n      const userAlreadyLiked = post.likes.some(like => like.user === parsedUserId);\n      if (userAlreadyLiked) {\n        setFUserPostDetails(fUserPostDetails.map(p => p._id === postId ? {\n          ...p,\n          likes: p.likes.filter(like => like.user !== parsedUserId),\n          likeStatus: \"Not Liked\"\n        } : p));\n      } else {\n        setFUserPostDetails(fUserPostDetails.map(p => p._id === postId ? {\n          ...p,\n          likes: [...p.likes, {\n            user: parsedUserId\n          }],\n          likeStatus: \"Liked\"\n        } : p));\n      }\n    }\n    return response;\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex min-h-screen sm:pl-72 sm:pt-24 max-w-7xl mx-auto sm:p-4\",\n      children: [console.log(fUserPostDetails), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full bg-white p-4 rounded-lg shadow-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative mb-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: storiesContainerRef,\n            className: \"flex space-x-4 overflow-x-auto scrollbar-hide whitespace-nowrap mb-4 py-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-shrink-0 w-24 h-24 bg-gray-300 rounded-full cursor-pointer relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/*,video/*\",\n                onChange: handleStoryChange,\n                className: \"absolute inset-0 opacity-0 cursor-pointer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 526,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center h-full text-gray-700\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xl font-bold\",\n                  children: \"+\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 533,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 525,\n              columnNumber: 15\n            }, this), groupedStories && groupedStories.map(story => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-shrink-0 w-24 h-24 bg-gray-300 rounded-full cursor-pointer\",\n                onClick: () => handleStoryClick(story) // On click, display the stories\n                ,\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: story.user.picture,\n                  alt: \"Failed to load profile img\",\n                  className: \"w-full h-full rounded-full object-cover border-2 border-transparent \\r bg-gradient-to-r from-pink-600 via-yellow-500 to-pink-600 p-[2px] shadow-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 546,\n                  columnNumber: 23\n                }, this)\n              }, story.user._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 541,\n                columnNumber: 21\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 520,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 11\n        }, this), selectedStory && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative max-w-3xl w-[90%] md:w-full bg-white p-4 rounded-lg shadow-2xl overflow-hidden\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setSelectedStory(null);\n                setCurrentStoryIndex(0);\n              },\n              className: \"absolute top-4 right-4 text-white text-2xl bg-black bg-opacity-50 px-5 py-1 rounded-lg hover:bg-opacity-75 transition\",\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-4 hover:cursor-pointer relative mt-12\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: selectedStory.user.picture,\n                  alt: \"Failed to load img\",\n                  className: \"rounded-full h-14 w-14 mr-3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 576,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    className: \"text-lg font-semibold text-black\",\n                    children: selectedStory.user.fullName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 582,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-base text-gray-600\",\n                    children: [\"@\", selectedStory.user.userName]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 585,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 581,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 19\n              }, this), selectedStory.user._id === parsedId && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDeleteStory(selectedStory.stories[currentStoryIndex]._id),\n                className: \"relative flex items-center justify-center text-white text-2xl ml-4 p-3 rounded-full transition-all duration-300 transform hover:scale-105 hover:shadow-lg\",\n                title: \"Delete Story\",\n                style: {\n                  background: \"linear-gradient(135deg, #ff416c, #ff4b2b)\",\n                  boxShadow: \"0 4px 15px rgba(255, 75, 43, 0.5)\"\n                },\n                children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faTrashAlt\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 606,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 593,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col items-center justify-center relative\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative w-full max-w-3xl h-[70vh] bg-black rounded-lg overflow-hidden shadow-lg\",\n                children: [selectedStory.stories[currentStoryIndex].imageUrl.endsWith(\".mp4\") ? /*#__PURE__*/_jsxDEV(\"video\", {\n                  src: selectedStory.stories[currentStoryIndex].imageUrl,\n                  controls: true,\n                  autoPlay: true,\n                  className: \"w-full h-full object-contain rounded-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 618,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: selectedStory.stories[currentStoryIndex].imageUrl,\n                  alt: \"Failed to load story\",\n                  className: \"w-full h-full object-contain rounded-lg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 625,\n                  columnNumber: 23\n                }, this), selectedStory.stories[currentStoryIndex].text && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"absolute bottom-14 left-4 text-white text-base font-semibold shadow-md max-w-[90%] bg-black bg-opacity-50 p-2 rounded-lg\",\n                  children: [\"Caption: \", selectedStory.stories[currentStoryIndex].text]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 634,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"absolute top-4 left-4 text-sm text-white bg-black bg-opacity-50 px-2 py-1 rounded-lg\",\n                  children: new Date(selectedStory.stories[currentStoryIndex].createdAt).toLocaleDateString(\"en-GB\", {\n                    day: \"2-digit\",\n                    month: \"long\",\n                    year: \"numeric\"\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 640,\n                  columnNumber: 21\n                }, this), currentStoryIndex > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setCurrentStoryIndex(currentStoryIndex - 1),\n                  className: \"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white text-3xl p-2 rounded-full hover:bg-opacity-75\",\n                  children: \"\\u25C0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 652,\n                  columnNumber: 23\n                }, this), currentStoryIndex < selectedStory.stories.length - 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setCurrentStoryIndex(currentStoryIndex + 1),\n                  className: \"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white text-3xl p-2 rounded-full hover:bg-opacity-75\",\n                  children: \"\\u25B6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 664,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 613,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 612,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 560,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 bg-white rounded-lg shadow-lg mt-2 mb-5\",\n          children: [storyMediaPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4\",\n            children: storyMediaFile.type.startsWith(\"video/\") ? /*#__PURE__*/_jsxDEV(\"video\", {\n              src: storyMediaPreview,\n              controls: true,\n              className: \"w-full h-auto rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 684,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              src: storyMediaPreview,\n              alt: \"Media Preview\",\n              className: \"w-full h-auto rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 682,\n            columnNumber: 15\n          }, this), storyMediaPreview && /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"mt-4 w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none text-black\",\n            placeholder: \"Write a caption...\",\n            value: storyCaption,\n            onChange: handleStoryCaptionChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 701,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end mt-4 space-x-3\",\n            children: storyMediaFile && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"py-2 px-6 bg-gray-200 text-black rounded-lg hover:bg-gray-300\",\n                onClick: () => {\n                  setStoryMediaFile(null);\n                  setStoryMediaPreview(\"\");\n                  setStoryCaption(\"\");\n                },\n                disabled: !storyMediaFile,\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 713,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `py-2 px-6 rounded-lg text-white ${storyMediaFile ? \"bg-blue-600 hover:bg-blue-700\" : \"bg-gray-400 cursor-not-allowed\"}`,\n                onClick: handleCreateStory,\n                disabled: !storyMediaFile,\n                children: \"Upload Story\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 724,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 710,\n            columnNumber: 13\n          }, this), !storyMediaFile && /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"mediaUpload\",\n            className: \"cursor-pointer flex flex-col items-center justify-center border-2 border-dashed border-gray-300 p-6 rounded-lg hover:border-blue-500 transition\",\n            children: [mediaPreview ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-blue-500 font-semibold\",\n              children: \"Change Media\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 746,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-12 h-12 text-gray-500\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                viewBox: \"0 0 24 24\",\n                xmlns: \"http://www.w3.org/2000/svg\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M12 4v16m8-8H4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 757,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 749,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600 mt-2 text-center\",\n                children: \"Click to upload an image or video\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 759,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              id: \"mediaUpload\",\n              className: \"hidden\",\n              accept: \"image/*, video/*\",\n              onChange: handleMediaChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 764,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 741,\n            columnNumber: 15\n          }, this), mediaPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4\",\n            children: mediaFile.type.startsWith(\"video/\") ? /*#__PURE__*/_jsxDEV(\"video\", {\n              src: mediaPreview,\n              controls: true,\n              className: \"w-full h-auto rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 778,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              src: mediaPreview,\n              alt: \"Media Preview\",\n              className: \"w-full h-auto rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 784,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 776,\n            columnNumber: 15\n          }, this), mediaPreview && /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"mt-4 w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none text-black\",\n            placeholder: \"Write a caption...\",\n            value: caption,\n            onChange: handleCaptionChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 795,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end mt-4 space-x-3\",\n            children: mediaFile && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"py-2 px-6 bg-gray-200 text-black rounded-lg hover:bg-gray-300\",\n                onClick: () => {\n                  setMediaFile(null);\n                  setMediaPreview(\"\");\n                  setCaption(\"\");\n                },\n                disabled: !mediaFile,\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 807,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `py-2 px-6 rounded-lg text-white ${mediaFile && caption ? \"bg-blue-600 hover:bg-blue-700\" : \"bg-gray-400 cursor-not-allowed\"}`,\n                onClick: handleCreatePost,\n                disabled: !mediaFile || !caption,\n                children: \"Create Post\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 818,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 804,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 679,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-8xl mx-auto py-10\",\n          children: fUserPostDetails.map(post => /*#__PURE__*/_jsxDEV(FeedPost, {\n            postId: post._id,\n            picture: post.userId.picture,\n            userName: post.userId.userName,\n            postTime: post.createdAt,\n            postContent: post.description,\n            postMedia: post.media,\n            likeStatus: post.likeStatus,\n            countLikes: post.likes,\n            countComments: post.comments\n          }, post._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 836,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 834,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(Home, \"AeRGtgeKy+upi/RboAVSqfsr5yQ=\");\n_c = Home;\nfunction timeAgo(date) {\n  const now = new Date();\n  const diffInSeconds = Math.floor((now - new Date(date)) / 1000);\n  if (diffInSeconds < 60) {\n    return `${diffInSeconds} seconds ago`;\n  }\n  const diffInMinutes = Math.floor(diffInSeconds / 60);\n  if (diffInMinutes < 60) {\n    return `${diffInMinutes} minute${diffInMinutes > 1 ? \"s\" : \"\"} ago`;\n  }\n  const diffInHours = Math.floor(diffInMinutes / 60);\n  if (diffInHours < 24) {\n    return `${diffInHours} hour${diffInHours > 1 ? \"s\" : \"\"} ago`;\n  }\n  const diffInDays = Math.floor(diffInHours / 24);\n  if (diffInDays < 30) {\n    return `${diffInDays} day${diffInDays > 1 ? \"s\" : \"\"} ago`;\n  }\n  const diffInMonths = Math.floor(diffInDays / 30);\n  if (diffInMonths < 12) {\n    return `${diffInMonths} month${diffInMonths > 1 ? \"s\" : \"\"} ago`;\n  }\n  const diffInYears = Math.floor(diffInMonths / 12);\n  return `${diffInYears} year${diffInYears > 1 ? \"s\" : \"\"} ago`;\n}\nconst FeedPost = ({\n  postId,\n  picture,\n  userName,\n  postTime,\n  postContent,\n  postMedia,\n  likeStatus,\n  countLikes,\n  countComments\n}) => {\n  const formattedTime = timeAgo(postTime); // Convert the post time to a human-readable format\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-lg shadow-lg p-6 mb-6 border border-gray-200 hover:shadow-xl transition-all duration-300\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center mb-4 hover:cursor-pointer bg-gray-50 p-2 rounded-2xl\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-14 h-14\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: picture || Avatar,\n          className: \"h-14 mb-4 w-14 rounded-full shadow-md\",\n          alt: \"Failed to load img\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 903,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 902,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ml-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-gray-800\",\n          children: userName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 911,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500\",\n          children: formattedTime\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 912,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 910,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 901,\n      columnNumber: 7\n    }, this), postMedia && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: postMedia.endsWith(\".mp4\") ? /*#__PURE__*/_jsxDEV(\"video\", {\n        src: postMedia,\n        controls: true,\n        className: \"w-full rounded-lg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 919,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n        src: postMedia,\n        alt: \"Post Media\",\n        className: \"w-full rounded-lg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 921,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 917,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-800 text-base font-semibold leading-relaxed mb-3 p-1 bg-white rounded-lg transition-all duration-300\",\n      children: postContent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 930,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center pl-1 space-x-6 text-gray-600\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: likeStatus === \"Liked\" ? LikeHeart : faHeart,\n          className: `text-2xl cursor-pointer ${likeStatus === \"Liked\" ? \"text-red-600\" : \"text-gray-600\"} hover:scale-110 transition-transform`\n          // onClick={() => handleLikePost(postId)}\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 936,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-lg text-gray-700\",\n          children: countLikes === null || countLikes === void 0 ? void 0 : countLikes.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 944,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faComment,\n          className: \"text-2xl cursor-pointer text-gray-600 hover:text-blue-500\",\n          onClick: () => {\n            // handleSpecificPostComments(postId);\n            // handleStoreSpecificPostId(postId);\n            document.getElementById(\"addComment_Modal\").showModal();\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 946,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-lg text-gray-700\",\n          children: countComments === null || countComments === void 0 ? void 0 : countComments.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 955,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 935,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n        icon: faPaperPlane,\n        className: \"text-2xl cursor-pointer text-gray-600 hover:text-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 959,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 934,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 900,\n    columnNumber: 5\n  }, this);\n};\n_c2 = FeedPost;\nexport default Home;\nvar _c, _c2;\n$RefreshReg$(_c, \"Home\");\n$RefreshReg$(_c2, \"FeedPost\");","map":{"version":3,"names":["React","useContext","useEffect","useRef","useState","FontAwesomeIcon","vividlyContext","Avatar","faShare","faComment","faHeart","LikeHeart","faPaperPlane","faTrashAlt","jsxDEV","_jsxDEV","Fragment","_Fragment","Home","_s","context","handleCreateStoryWithMediaOnly","handleCreateStoryTextAndMedia","handleDelStory","handleFollowedUserPosts","id","localStorage","getItem","parsedId","JSON","parse","showPrevIcon","setShowPrevIcon","showNextIcon","setShowNextIcon","storiesContainerRef","userProfile","setUserProfile","groupedStories","setGroupedStories","processStories","stories","newGroupedStories","forEach","story","user","_id","push","prevStories","updatedStories","reduce","acc","group","Object","values","existingStoryIds","Set","map","has","handleFetchFollowedUserStories","token","parsedToken","response","fetch","ENDPOINT","method","headers","data","json","success","message","error","console","log","handleFetchUserStories","handlefetchUserProfile","handleFollowedUserPostDetails","process","env","REACT_APP_ENDPOINT","handleScroll","current","scrollLeft","scrollWidth","clientWidth","container","addEventListener","removeEventListener","mediaPreview","setMediaPreview","storyMediaPreview","setStoryMediaPreview","mediaFile","setMediaFile","storyMediaFile","setStoryMediaFile","media","setMedia","caption","setCaption","storyCaption","setStoryCaption","selectedStory","setSelectedStory","currentStoryIndex","setCurrentStoryIndex","handleMediaChange","e","file","target","files","formdata","FormData","append","body","url","URL","createObjectURL","handleStoryChange","handleCaptionChange","value","handleStoryCaptionChange","handleCreatePost","mediaType","type","startsWith","stringify","description","handleCreateStory","handleStoryClick","handleDeleteStory","storyId","length","filter","s","handleFetchPostLikes","postId","postLikes","likes","handleFetchPostComments","postComments","comments","fUserPostDetails","setFUserPostDetails","posts","postsWithDetails","Promise","all","post","likeStatus","some","like","handleLikePost","userId","parsedUserId","find","userAlreadyLiked","p","children","className","ref","accept","onChange","fileName","_jsxFileName","lineNumber","columnNumber","onClick","src","picture","alt","fullName","userName","title","style","background","boxShadow","icon","imageUrl","endsWith","controls","autoPlay","text","Date","createdAt","toLocaleDateString","day","month","year","placeholder","disabled","htmlFor","fill","stroke","strokeWidth","viewBox","xmlns","d","FeedPost","postTime","postContent","postMedia","countLikes","countComments","_c","timeAgo","date","now","diffInSeconds","Math","floor","diffInMinutes","diffInHours","diffInDays","diffInMonths","diffInYears","formattedTime","document","getElementById","showModal","_c2","$RefreshReg$"],"sources":["C:/Users/Ahmad12/Documents/Vividly/Frontend/src/Components/Home.js"],"sourcesContent":["import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport vividlyContext from \"../Context/vividlyContext\";\r\nimport Avatar from \"../Images/Avatar.jpeg\";\r\n// import { io } from \"socket.io-client\";\r\n\r\nimport { faShare } from \"@fortawesome/free-solid-svg-icons\";\r\nimport {\r\n  faComment,\r\n  faHeart as LikeHeart,\r\n  faPaperPlane,\r\n} from \"@fortawesome/free-regular-svg-icons\";\r\nimport { faTrashAlt, faHeart } from \"@fortawesome/free-regular-svg-icons\";\r\n\r\nconst Home = () => {\r\n  // useEffect(() => {\r\n  //   const socket = io(\"http://localhost:5000\");\r\n\r\n  //   socket.emit(\"message\", \"Bilal\");\r\n  //   socket.on(\"response\", (data) => {\r\n  //     console.log(\"Server Response:\", data);\r\n  //   });\r\n  //   return () => {\r\n  //     socket.disconnect();\r\n  //   };\r\n  // }, []);\r\n\r\n  const context = useContext(vividlyContext);\r\n  const {\r\n    handleCreateStoryWithMediaOnly,\r\n    handleCreateStoryTextAndMedia,\r\n    handleDelStory,\r\n    handleFollowedUserPosts,\r\n  } = context;\r\n\r\n  const id = localStorage.getItem(\"id\");\r\n  const parsedId = JSON.parse(id);\r\n\r\n  const [showPrevIcon, setShowPrevIcon] = useState(false);\r\n  const [showNextIcon, setShowNextIcon] = useState(true);\r\n  const storiesContainerRef = useRef(null);\r\n  const [userProfile, setUserProfile] = useState(\"\");\r\n\r\n  const [groupedStories, setGroupedStories] = useState([]);\r\n\r\n  const processStories = (stories) => {\r\n    const newGroupedStories = {};\r\n    stories.forEach((story) => {\r\n      if (!newGroupedStories[story.user._id]) {\r\n        newGroupedStories[story.user._id] = {\r\n          user: story.user,\r\n          stories: [],\r\n        };\r\n      }\r\n      newGroupedStories[story.user._id].stories.push(story);\r\n    });\r\n\r\n    setGroupedStories((prevStories) => {\r\n      const updatedStories = {\r\n        ...prevStories.reduce((acc, group) => {\r\n          acc[group.user._id] = group;\r\n          return acc;\r\n        }, {}),\r\n      };\r\n      Object.values(newGroupedStories).forEach((group) => {\r\n        if (!updatedStories[group.user._id]) {\r\n          updatedStories[group.user._id] = group;\r\n        } else {\r\n          const existingStoryIds = new Set(\r\n            updatedStories[group.user._id].stories.map((story) => story._id)\r\n          );\r\n          group.stories.forEach((story) => {\r\n            if (!existingStoryIds.has(story._id)) {\r\n              updatedStories[group.user._id].stories.push(story);\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      return Object.values(updatedStories);\r\n    });\r\n  };\r\n\r\n  const handleFetchFollowedUserStories = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const parsedToken = JSON.parse(token);\r\n      const response = await fetch(\r\n        `${ENDPOINT}/api/story/getFollowUserStories`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"auth-token\": parsedToken,\r\n          },\r\n        }\r\n      );\r\n      const data = await response.json();\r\n\r\n      if (\r\n        data.success &&\r\n        data.message !== \"No stories found for the users you're following.\"\r\n      ) {\r\n        processStories(data.stories);\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Error:\", error);\r\n    }\r\n  };\r\n\r\n  const handleFetchUserStories = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const parsedToken = JSON.parse(token);\r\n      const response = await fetch(`${ENDPOINT}/api/story/getUStories`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"auth-token\": parsedToken,\r\n        },\r\n      });\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        processStories(data.stories);\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Error:\", error.message);\r\n    }\r\n  };\r\n\r\n  const handlefetchUserProfile = async () => {\r\n    const id = localStorage.getItem(\"id\");\r\n    const parsedId = JSON.parse(id);\r\n    const token = localStorage.getItem(\"token\");\r\n    const parsedToken = JSON.parse(token);\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `${ENDPOINT}/api/user/getUserProfile/${parsedId}`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"auth-token\": parsedToken,\r\n          },\r\n        }\r\n      );\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setUserProfile(data);\r\n      } else {\r\n        console.log(\"Error\");\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Error:\", error.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    handlefetchUserProfile();\r\n    handleFetchFollowedUserStories();\r\n    handleFetchUserStories();\r\n    handleFollowedUserPostDetails();\r\n  }, []);\r\n\r\n  const ENDPOINT = process.env.REACT_APP_ENDPOINT;\r\n\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      if (storiesContainerRef.current) {\r\n        const { scrollLeft, scrollWidth, clientWidth } =\r\n          storiesContainerRef.current;\r\n\r\n        // Show \"prev\" icon if scrollLeft > 0\r\n        setShowPrevIcon(scrollLeft > 0);\r\n\r\n        // Show \"next\" icon if there's more content to scroll\r\n        setShowNextIcon(scrollLeft + clientWidth < scrollWidth - 1);\r\n      }\r\n    };\r\n\r\n    // Attach scroll event listener\r\n    const container = storiesContainerRef.current;\r\n    container.addEventListener(\"scroll\", handleScroll);\r\n\r\n    // Initial state update\r\n    handleScroll();\r\n\r\n    return () => {\r\n      // Cleanup event listener\r\n      container.removeEventListener(\"scroll\", handleScroll);\r\n    };\r\n  }, []);\r\n\r\n  const [mediaPreview, setMediaPreview] = useState(null);\r\n  const [storyMediaPreview, setStoryMediaPreview] = useState(null);\r\n\r\n  // const handlePost = () => {};\r\n\r\n  const [mediaFile, setMediaFile] = useState(null);\r\n  const [storyMediaFile, setStoryMediaFile] = useState(null);\r\n  const [media, setMedia] = useState(\"\");\r\n  const [caption, setCaption] = useState(\"\");\r\n  const [storyCaption, setStoryCaption] = useState(\"\");\r\n  const [selectedStory, setSelectedStory] = useState(null);\r\n  const [currentStoryIndex, setCurrentStoryIndex] = useState(0);\r\n\r\n  const handleMediaChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) {\r\n      return console.log(\"Please upload a file!\");\r\n    }\r\n\r\n    const formdata = new FormData();\r\n    formdata.append(\"media\", file);\r\n\r\n    try {\r\n      const data = await fetch(`${ENDPOINT}/api/post/media`, {\r\n        method: \"POST\",\r\n        body: formdata,\r\n      });\r\n      const response = await data.json();\r\n      if (response.success) {\r\n        setMedia(response.url);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n    setMediaPreview(URL.createObjectURL(file));\r\n    setMediaFile(file);\r\n  };\r\n\r\n  const handleStoryChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) {\r\n      return console.log(\"Please upload a file!\");\r\n    }\r\n\r\n    const formdata = new FormData();\r\n    formdata.append(\"media\", file);\r\n\r\n    try {\r\n      const data = await fetch(`${ENDPOINT}/api/post/media`, {\r\n        method: \"POST\",\r\n        body: formdata,\r\n      });\r\n      const response = await data.json();\r\n      if (response.success) {\r\n        setMedia(response.url);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n    setStoryMediaPreview(URL.createObjectURL(file));\r\n    setStoryMediaFile(file);\r\n  };\r\n\r\n  const handleCaptionChange = (e) => {\r\n    setCaption(e.target.value);\r\n  };\r\n\r\n  const handleStoryCaptionChange = (e) => {\r\n    setStoryCaption(e.target.value);\r\n  };\r\n\r\n  const handleCreatePost = async () => {\r\n    try {\r\n      const mediaType = mediaFile.type.startsWith(\"video/\") ? \"video\" : \"image\";\r\n      const token = localStorage.getItem(\"token\");\r\n      const parsedToken = JSON.parse(token);\r\n      const response = await fetch(`${ENDPOINT}/api/post/createPost`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"auth-token\": parsedToken,\r\n        },\r\n        body: JSON.stringify({\r\n          description: caption,\r\n          media: media,\r\n          mediaType: mediaType,\r\n        }),\r\n      });\r\n      const data = await response.json();\r\n      setMediaFile(null);\r\n      setMediaPreview(\"\");\r\n      setCaption(\"\");\r\n      // setUserPost([...userPost, data]);\r\n      // await handleFetchUserPosts();\r\n    } catch (error) {\r\n      console.log(\"Error:\", error.message);\r\n    }\r\n  };\r\n  const handleCreateStory = async () => {\r\n    try {\r\n      if (storyMediaFile && storyCaption) {\r\n        const response = await handleCreateStoryTextAndMedia(\r\n          media,\r\n          storyCaption\r\n        );\r\n        if (response.success) {\r\n          setStoryMediaFile(null);\r\n          setStoryMediaPreview(\"\");\r\n          setStoryCaption(\"\");\r\n        }\r\n      } else if (storyMediaFile) {\r\n        const response = await handleCreateStoryWithMediaOnly(media);\r\n        if (response.success) {\r\n          setStoryMediaFile(null);\r\n          setStoryMediaPreview(\"\");\r\n          setStoryCaption(\"\");\r\n        }\r\n      }\r\n      await handleFetchUserStories();\r\n\r\n      // setUserPost([...userPost, data]);\r\n      // await handleFetchUserPosts();\r\n    } catch (error) {\r\n      console.log(\"Error:\", error);\r\n    }\r\n  };\r\n\r\n  const handleStoryClick = (stories) => {\r\n    setSelectedStory(stories);\r\n  };\r\n\r\n  const handleDeleteStory = async (storyId) => {\r\n    const response = await handleDelStory(storyId);\r\n\r\n    if (response.success) {\r\n      if (selectedStory.stories.length > 1) {\r\n        setSelectedStory({\r\n          ...selectedStory,\r\n          stories: selectedStory.stories.filter((s) => s._id !== storyId),\r\n        });\r\n      } else {\r\n        setSelectedStory(null);\r\n        setGroupedStories(\r\n          groupedStories.filter((s) => s.user._id !== parsedId)\r\n        );\r\n      }\r\n    }\r\n  };\r\n  const handleFetchPostLikes = async (postId) => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const parsedToken = JSON.parse(token);\r\n      const response = await fetch(\r\n        `${ENDPOINT}/api/post/fetchPostLikes/${postId}`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"auth-token\": parsedToken,\r\n          },\r\n        }\r\n      );\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        return data.postLikes.likes;\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Error:\", error.message);\r\n    }\r\n  };\r\n\r\n  // const handleLikePost = async (postId) => {\r\n  //   const token = localStorage.getItem(\"token\");\r\n  //   const parsedToken = JSON.parse(token);\r\n  //   const data = await fetch(`${ENDPOINT}/api/post/likePost/${postId}`, {\r\n  //     method: \"PUT\",\r\n  //     headers: {\r\n  //       \"Content-Type\": \"application/json\",\r\n  //       \"auth-token\": parsedToken,\r\n  //     },\r\n  //   });\r\n  //   const response = await data.json();\r\n  //   const userId = localStorage.getItem(\"id\");\r\n  //   const parsedUserId = JSON.parse(userId);\r\n\r\n  //   const post = userPost.find((post) => post._id === postId);\r\n  //   if (post) {\r\n  //     const userAlreadyLiked = post.likes.some(\r\n  //       (like) => like.user === parsedUserId\r\n  //     );\r\n\r\n  //     if (userAlreadyLiked) {\r\n  //       setUserPost(\r\n  //         userPost.map((p) =>\r\n  //           p._id === postId\r\n  //             ? {\r\n  //                 ...p,\r\n  //                 likes: p.likes.filter((like) => like.user !== parsedUserId),\r\n  //                 likeStatus: \"Not Liked\",\r\n  //               }\r\n  //             : p\r\n  //         )\r\n  //       );\r\n  //     } else {\r\n  //       setUserPost(\r\n  //         userPost.map((p) =>\r\n  //           p._id === postId\r\n  //             ? {\r\n  //                 ...p,\r\n  //                 likes: [...p.likes, { user: parsedUserId }],\r\n  //                 likeStatus: \"Liked\",\r\n  //               }\r\n  //             : p\r\n  //         )\r\n  //       );\r\n  //     }\r\n  //   }\r\n\r\n  //   return response;\r\n  // };\r\n\r\n  const handleFetchPostComments = async (postId) => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const parsedToken = JSON.parse(token);\r\n      const response = await fetch(\r\n        `${ENDPOINT}/api/post/fetchPostComments/${postId}`,\r\n        {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"auth-token\": parsedToken,\r\n          },\r\n        }\r\n      );\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        return data.postComments.comments; // Return the likes for a given post\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Error:\", error.message);\r\n    }\r\n  };\r\n  const [fUserPostDetails, setFUserPostDetails] = useState([]);\r\n\r\n  const handleFollowedUserPostDetails = async () => {\r\n    const posts = await handleFollowedUserPosts();\r\n    const postsWithDetails = await Promise.all(\r\n      posts.map(async (post) => {\r\n        const likes = await handleFetchPostLikes(post._id);\r\n        const comments = await handleFetchPostComments(post._id);\r\n        let likeStatus = likes.some((like) => like.user === parsedId)\r\n          ? \"Liked\"\r\n          : \"Not Liked\";\r\n\r\n        return { ...post, likes, comments, likeStatus };\r\n      })\r\n    );\r\n    setFUserPostDetails(postsWithDetails);\r\n  };\r\n  const handleLikePost = async (postId) => {\r\n    const token = localStorage.getItem(\"token\");\r\n    const parsedToken = JSON.parse(token);\r\n    const data = await fetch(`${ENDPOINT}/api/post/likePost/${postId}`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"auth-token\": parsedToken,\r\n      },\r\n    });\r\n    const response = await data.json();\r\n    const userId = localStorage.getItem(\"id\");\r\n    const parsedUserId = JSON.parse(userId);\r\n\r\n    const post = fUserPostDetails.find((post) => post._id === postId);\r\n    if (post) {\r\n      const userAlreadyLiked = post.likes.some(\r\n        (like) => like.user === parsedUserId\r\n      );\r\n\r\n      if (userAlreadyLiked) {\r\n        setFUserPostDetails(\r\n          fUserPostDetails.map((p) =>\r\n            p._id === postId\r\n              ? {\r\n                  ...p,\r\n                  likes: p.likes.filter((like) => like.user !== parsedUserId),\r\n                  likeStatus: \"Not Liked\",\r\n                }\r\n              : p\r\n          )\r\n        );\r\n      } else {\r\n        setFUserPostDetails(\r\n          fUserPostDetails.map((p) =>\r\n            p._id === postId\r\n              ? {\r\n                  ...p,\r\n                  likes: [...p.likes, { user: parsedUserId }],\r\n                  likeStatus: \"Liked\",\r\n                }\r\n              : p\r\n          )\r\n        );\r\n      }\r\n    }\r\n\r\n    return response;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Main Content Section */}\r\n\r\n      <div className=\"flex min-h-screen sm:pl-72 sm:pt-24 max-w-7xl mx-auto sm:p-4\">\r\n        {/* Feed Section */}\r\n\r\n        {console.log(fUserPostDetails)}\r\n\r\n        <div className=\"w-full bg-white p-4 rounded-lg shadow-lg\">\r\n          {/* Stories/Highlights */}\r\n          {/* Stories Section with Scroll Indicator */}\r\n          <div className=\"relative mb-6\">\r\n            <div\r\n              ref={storiesContainerRef}\r\n              className=\"flex space-x-4 overflow-x-auto scrollbar-hide whitespace-nowrap mb-4 py-2\"\r\n            >\r\n              {/* Story Upload Section */}\r\n              <div className=\"flex-shrink-0 w-24 h-24 bg-gray-300 rounded-full cursor-pointer relative\">\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"image/*,video/*\"\r\n                  onChange={handleStoryChange}\r\n                  className=\"absolute inset-0 opacity-0 cursor-pointer\"\r\n                />\r\n                <div className=\"flex items-center justify-center h-full text-gray-700\">\r\n                  <span className=\"text-xl font-bold\">+</span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Other Story Items */}\r\n              {groupedStories &&\r\n                groupedStories.map((story) => {\r\n                  return (\r\n                    <div\r\n                      key={story.user._id}\r\n                      className=\"flex-shrink-0 w-24 h-24 bg-gray-300 rounded-full cursor-pointer\"\r\n                      onClick={() => handleStoryClick(story)} // On click, display the stories\r\n                    >\r\n                      <img\r\n                        src={story.user.picture}\r\n                        alt=\"Failed to load profile img\"\r\n                        className=\"w-full h-full rounded-full object-cover border-2 border-transparent \r\n                  bg-gradient-to-r from-pink-600 via-yellow-500 to-pink-600 p-[2px] shadow-lg\"\r\n                      />\r\n                    </div>\r\n                  );\r\n                })}\r\n            </div>\r\n          </div>\r\n\r\n          {selectedStory && (\r\n            <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\">\r\n              <div className=\"relative max-w-3xl w-[90%] md:w-full bg-white p-4 rounded-lg shadow-2xl overflow-hidden\">\r\n                {/* Close Button */}\r\n                <button\r\n                  onClick={() => {\r\n                    setSelectedStory(null);\r\n                    setCurrentStoryIndex(0);\r\n                  }}\r\n                  className=\"absolute top-4 right-4 text-white text-2xl bg-black bg-opacity-50 px-5 py-1 rounded-lg hover:bg-opacity-75 transition\"\r\n                >\r\n                  &times;\r\n                </button>\r\n\r\n                {/* User Info and Delete Button */}\r\n                <div className=\"flex items-center justify-between mb-4 hover:cursor-pointer relative mt-12\">\r\n                  {/* User Info */}\r\n                  <div className=\"flex items-center\">\r\n                    <img\r\n                      src={selectedStory.user.picture}\r\n                      alt=\"Failed to load img\"\r\n                      className=\"rounded-full h-14 w-14 mr-3\"\r\n                    />\r\n                    <div>\r\n                      <h2 className=\"text-lg font-semibold text-black\">\r\n                        {selectedStory.user.fullName}\r\n                      </h2>\r\n                      <p className=\"text-base text-gray-600\">\r\n                        @{selectedStory.user.userName}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Delete Button with Font Awesome Icon */}\r\n                  {selectedStory.user._id === parsedId && (\r\n                    <button\r\n                      onClick={() =>\r\n                        handleDeleteStory(\r\n                          selectedStory.stories[currentStoryIndex]._id\r\n                        )\r\n                      }\r\n                      className=\"relative flex items-center justify-center text-white text-2xl ml-4 p-3 rounded-full transition-all duration-300 transform hover:scale-105 hover:shadow-lg\"\r\n                      title=\"Delete Story\"\r\n                      style={{\r\n                        background: \"linear-gradient(135deg, #ff416c, #ff4b2b)\",\r\n                        boxShadow: \"0 4px 15px rgba(255, 75, 43, 0.5)\",\r\n                      }}\r\n                    >\r\n                      <FontAwesomeIcon icon={faTrashAlt} />\r\n                    </button>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Story Content with Date and Navigation */}\r\n                <div className=\"flex flex-col items-center justify-center relative\">\r\n                  <div className=\"relative w-full max-w-3xl h-[70vh] bg-black rounded-lg overflow-hidden shadow-lg\">\r\n                    {/* Story Media */}\r\n                    {selectedStory.stories[currentStoryIndex].imageUrl.endsWith(\r\n                      \".mp4\"\r\n                    ) ? (\r\n                      <video\r\n                        src={selectedStory.stories[currentStoryIndex].imageUrl}\r\n                        controls\r\n                        autoPlay\r\n                        className=\"w-full h-full object-contain rounded-lg\"\r\n                      />\r\n                    ) : (\r\n                      <img\r\n                        src={selectedStory.stories[currentStoryIndex].imageUrl}\r\n                        alt=\"Failed to load story\"\r\n                        className=\"w-full h-full object-contain rounded-lg\"\r\n                      />\r\n                    )}\r\n\r\n                    {/* Story Caption */}\r\n                    {selectedStory.stories[currentStoryIndex].text && (\r\n                      <p className=\"absolute bottom-14 left-4 text-white text-base font-semibold shadow-md max-w-[90%] bg-black bg-opacity-50 p-2 rounded-lg\">\r\n                        Caption: {selectedStory.stories[currentStoryIndex].text}\r\n                      </p>\r\n                    )}\r\n\r\n                    {/* Story Date */}\r\n                    <p className=\"absolute top-4 left-4 text-sm text-white bg-black bg-opacity-50 px-2 py-1 rounded-lg\">\r\n                      {new Date(\r\n                        selectedStory.stories[currentStoryIndex].createdAt\r\n                      ).toLocaleDateString(\"en-GB\", {\r\n                        day: \"2-digit\",\r\n                        month: \"long\",\r\n                        year: \"numeric\",\r\n                      })}\r\n                    </p>\r\n\r\n                    {/* Left Arrow (Previous Story) */}\r\n                    {currentStoryIndex > 0 && (\r\n                      <button\r\n                        onClick={() =>\r\n                          setCurrentStoryIndex(currentStoryIndex - 1)\r\n                        }\r\n                        className=\"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white text-3xl p-2 rounded-full hover:bg-opacity-75\"\r\n                      >\r\n                        &#9664;\r\n                      </button>\r\n                    )}\r\n\r\n                    {/* Right Arrow (Next Story) */}\r\n                    {currentStoryIndex < selectedStory.stories.length - 1 && (\r\n                      <button\r\n                        onClick={() =>\r\n                          setCurrentStoryIndex(currentStoryIndex + 1)\r\n                        }\r\n                        className=\"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white text-3xl p-2 rounded-full hover:bg-opacity-75\"\r\n                      >\r\n                        &#9654;\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"p-6 bg-white rounded-lg shadow-lg mt-2 mb-5\">\r\n            {/* Story Media Preview Section */}\r\n            {storyMediaPreview && (\r\n              <div className=\"mt-4\">\r\n                {storyMediaFile.type.startsWith(\"video/\") ? (\r\n                  <video\r\n                    src={storyMediaPreview}\r\n                    controls\r\n                    className=\"w-full h-auto rounded-lg\"\r\n                  />\r\n                ) : (\r\n                  <img\r\n                    src={storyMediaPreview}\r\n                    alt=\"Media Preview\"\r\n                    className=\"w-full h-auto rounded-lg\"\r\n                  />\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Story Text Caption */}\r\n            {storyMediaPreview && (\r\n              <textarea\r\n                className=\"mt-4 w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none text-black\"\r\n                placeholder=\"Write a caption...\"\r\n                value={storyCaption}\r\n                onChange={handleStoryCaptionChange}\r\n              />\r\n            )}\r\n\r\n            {/*Story Action Buttons */}\r\n            <div className=\"flex justify-end mt-4 space-x-3\">\r\n              {storyMediaFile && (\r\n                <>\r\n                  <button\r\n                    className=\"py-2 px-6 bg-gray-200 text-black rounded-lg hover:bg-gray-300\"\r\n                    onClick={() => {\r\n                      setStoryMediaFile(null);\r\n                      setStoryMediaPreview(\"\");\r\n                      setStoryCaption(\"\");\r\n                    }}\r\n                    disabled={!storyMediaFile}\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    className={`py-2 px-6 rounded-lg text-white ${\r\n                      storyMediaFile\r\n                        ? \"bg-blue-600 hover:bg-blue-700\"\r\n                        : \"bg-gray-400 cursor-not-allowed\"\r\n                    }`}\r\n                    onClick={handleCreateStory}\r\n                    disabled={!storyMediaFile}\r\n                  >\r\n                    Upload Story\r\n                  </button>\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            {/* Upload Section */}\r\n            {!storyMediaFile && (\r\n              <label\r\n                htmlFor=\"mediaUpload\"\r\n                className=\"cursor-pointer flex flex-col items-center justify-center border-2 border-dashed border-gray-300 p-6 rounded-lg hover:border-blue-500 transition\"\r\n              >\r\n                {mediaPreview ? (\r\n                  <p className=\"text-blue-500 font-semibold\">Change Media</p>\r\n                ) : (\r\n                  <>\r\n                    <svg\r\n                      className=\"w-12 h-12 text-gray-500\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                      <path d=\"M12 4v16m8-8H4\"></path>\r\n                    </svg>\r\n                    <p className=\"text-gray-600 mt-2 text-center\">\r\n                      Click to upload an image or video\r\n                    </p>\r\n                  </>\r\n                )}\r\n                <input\r\n                  type=\"file\"\r\n                  id=\"mediaUpload\"\r\n                  className=\"hidden\"\r\n                  accept=\"image/*, video/*\"\r\n                  onChange={handleMediaChange}\r\n                />\r\n              </label>\r\n            )}\r\n\r\n            {/* Media Preview Section */}\r\n            {mediaPreview && (\r\n              <div className=\"mt-4\">\r\n                {mediaFile.type.startsWith(\"video/\") ? (\r\n                  <video\r\n                    src={mediaPreview}\r\n                    controls\r\n                    className=\"w-full h-auto rounded-lg\"\r\n                  />\r\n                ) : (\r\n                  <img\r\n                    src={mediaPreview}\r\n                    alt=\"Media Preview\"\r\n                    className=\"w-full h-auto rounded-lg\"\r\n                  />\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Text Caption */}\r\n            {mediaPreview && (\r\n              <textarea\r\n                className=\"mt-4 w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none text-black\"\r\n                placeholder=\"Write a caption...\"\r\n                value={caption}\r\n                onChange={handleCaptionChange}\r\n              />\r\n            )}\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"flex justify-end mt-4 space-x-3\">\r\n              {mediaFile && (\r\n                <>\r\n                  <button\r\n                    className=\"py-2 px-6 bg-gray-200 text-black rounded-lg hover:bg-gray-300\"\r\n                    onClick={() => {\r\n                      setMediaFile(null);\r\n                      setMediaPreview(\"\");\r\n                      setCaption(\"\");\r\n                    }}\r\n                    disabled={!mediaFile}\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    className={`py-2 px-6 rounded-lg text-white ${\r\n                      mediaFile && caption\r\n                        ? \"bg-blue-600 hover:bg-blue-700\"\r\n                        : \"bg-gray-400 cursor-not-allowed\"\r\n                    }`}\r\n                    onClick={handleCreatePost}\r\n                    disabled={!mediaFile || !caption}\r\n                  >\r\n                    Create Post\r\n                  </button>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"max-w-8xl mx-auto py-10\">\r\n            {fUserPostDetails.map((post) => (\r\n              <FeedPost\r\n                key={post._id}\r\n                postId={post._id}\r\n                picture={post.userId.picture}\r\n                userName={post.userId.userName}\r\n                postTime={post.createdAt}\r\n                postContent={post.description}\r\n                postMedia={post.media}\r\n                likeStatus={post.likeStatus}\r\n                countLikes={post.likes}\r\n                countComments={post.comments}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nfunction timeAgo(date) {\r\n  const now = new Date();\r\n  const diffInSeconds = Math.floor((now - new Date(date)) / 1000);\r\n\r\n  if (diffInSeconds < 60) {\r\n    return `${diffInSeconds} seconds ago`;\r\n  }\r\n\r\n  const diffInMinutes = Math.floor(diffInSeconds / 60);\r\n  if (diffInMinutes < 60) {\r\n    return `${diffInMinutes} minute${diffInMinutes > 1 ? \"s\" : \"\"} ago`;\r\n  }\r\n\r\n  const diffInHours = Math.floor(diffInMinutes / 60);\r\n  if (diffInHours < 24) {\r\n    return `${diffInHours} hour${diffInHours > 1 ? \"s\" : \"\"} ago`;\r\n  }\r\n\r\n  const diffInDays = Math.floor(diffInHours / 24);\r\n  if (diffInDays < 30) {\r\n    return `${diffInDays} day${diffInDays > 1 ? \"s\" : \"\"} ago`;\r\n  }\r\n\r\n  const diffInMonths = Math.floor(diffInDays / 30);\r\n  if (diffInMonths < 12) {\r\n    return `${diffInMonths} month${diffInMonths > 1 ? \"s\" : \"\"} ago`;\r\n  }\r\n\r\n  const diffInYears = Math.floor(diffInMonths / 12);\r\n  return `${diffInYears} year${diffInYears > 1 ? \"s\" : \"\"} ago`;\r\n}\r\nconst FeedPost = ({\r\n  postId,\r\n  picture,\r\n  userName,\r\n  postTime,\r\n  postContent,\r\n  postMedia,\r\n  likeStatus,\r\n  countLikes,\r\n  countComments,\r\n}) => {\r\n  const formattedTime = timeAgo(postTime); // Convert the post time to a human-readable format\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-lg p-6 mb-6 border border-gray-200 hover:shadow-xl transition-all duration-300\">\r\n      <div className=\"flex items-center mb-4 hover:cursor-pointer bg-gray-50 p-2 rounded-2xl\">\r\n        <div className=\"w-14 h-14\">\r\n          <img\r\n            src={picture || Avatar}\r\n            className=\"h-14 mb-4 w-14 rounded-full shadow-md\"\r\n            alt=\"Failed to load img\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"ml-4\">\r\n          <h2 className=\"text-lg font-semibold text-gray-800\">{userName}</h2>\r\n          <p className=\"text-sm text-gray-500\">{formattedTime}</p>\r\n        </div>\r\n      </div>\r\n\r\n      {postMedia && (\r\n        <div className=\"mb-4\">\r\n          {postMedia.endsWith(\".mp4\") ? (\r\n            <video src={postMedia} controls className=\"w-full rounded-lg\" />\r\n          ) : (\r\n            <img\r\n              src={postMedia}\r\n              alt=\"Post Media\"\r\n              className=\"w-full rounded-lg\"\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      <p className=\"text-gray-800 text-base font-semibold leading-relaxed mb-3 p-1 bg-white rounded-lg transition-all duration-300\">\r\n        {postContent}\r\n      </p>\r\n\r\n      <div className=\"flex items-center pl-1 space-x-6 text-gray-600\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <FontAwesomeIcon\r\n            icon={likeStatus === \"Liked\" ? LikeHeart : faHeart}\r\n            className={`text-2xl cursor-pointer ${\r\n              likeStatus === \"Liked\" ? \"text-red-600\" : \"text-gray-600\"\r\n            } hover:scale-110 transition-transform`}\r\n            // onClick={() => handleLikePost(postId)}\r\n          />\r\n\r\n          <span className=\"text-lg text-gray-700\">{countLikes?.length}</span>\r\n\r\n          <FontAwesomeIcon\r\n            icon={faComment}\r\n            className=\"text-2xl cursor-pointer text-gray-600 hover:text-blue-500\"\r\n            onClick={() => {\r\n              // handleSpecificPostComments(postId);\r\n              // handleStoreSpecificPostId(postId);\r\n              document.getElementById(\"addComment_Modal\").showModal();\r\n            }}\r\n          />\r\n          <span className=\"text-lg text-gray-700\">{countComments?.length}</span>\r\n        </div>\r\n\r\n        {/* Share Button */}\r\n        <FontAwesomeIcon\r\n          icon={faPaperPlane}\r\n          className=\"text-2xl cursor-pointer text-gray-600 hover:text-blue-500\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}